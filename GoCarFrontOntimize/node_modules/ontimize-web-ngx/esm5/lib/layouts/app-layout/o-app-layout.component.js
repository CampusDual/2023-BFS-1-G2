import * as tslib_1 from "tslib";
import { Component, ContentChild, EventEmitter, ViewChild, ViewEncapsulation } from '@angular/core';
import { OAppHeaderComponent } from '../../components/app-header/o-app-header.component';
import { OAppSidenavComponent } from '../../components/app-sidenav/o-app-sidenav.component';
import { OUserInfoConfigurationDirective } from '../../components/user-info/user-info-configuration/o-user-info-configuration.directive';
import { InputConverter } from '../../decorators/input-converter';
import { Codes } from '../../util/codes';
import { Util } from '../../util/util';
export var DEFAULT_INPUTS_O_APP_LAYOUT = [
    'mode',
    'sidenavMode: sidenav-mode',
    'sidenavOpened: sidenav-opened',
    '_showHeader: show-header',
    'showUserInfo: show-user-info',
    'showLanguageSelector: show-language-selector',
    'useFlagIcons: use-flag-icons',
    'openedSidenavImg: opened-sidenav-image',
    'closedSidenavImg: closed-sidenav-image',
    'headerColor: header-color',
    'headerHeight: header-height',
    'showTitle: show-title',
    'staticTitle: static-title',
    'showStaticTitle: show-static-title'
];
export var DEFAULT_OUTPUTS_O_APP_LAYOUT = [
    'beforeOpenSidenav',
    'afterOpenSidenav',
    'beforeCloseSidenav',
    'afterCloseSidenav'
];
var OAppLayoutComponent = (function () {
    function OAppLayoutComponent() {
        this.sidenavOpened = true;
        this.showUserInfo = true;
        this.showLanguageSelector = true;
        this.useFlagIcons = false;
        this._showHeader = true;
        this.showTitle = false;
        this.showStaticTitle = false;
        this.headerHeight = Codes.DEFAULT_ROW_HEIGHT;
        this.beforeOpenSidenav = new EventEmitter();
        this.afterOpenSidenav = new EventEmitter();
        this.beforeCloseSidenav = new EventEmitter();
        this.afterCloseSidenav = new EventEmitter();
    }
    Object.defineProperty(OAppLayoutComponent.prototype, "showHeader", {
        get: function () {
            return this._showHeader;
        },
        set: function (val) {
            this._showHeader = val;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OAppLayoutComponent.prototype, "mode", {
        get: function () {
            return this._mode;
        },
        set: function (val) {
            var m = Codes.OAppLayoutModes.find(function (e) { return e === val; });
            if (Util.isDefined(m)) {
                this._mode = m;
                if (this._mode === 'mobile' && !Util.isDefined(this.showHeader)) {
                    this.showHeader = true;
                }
            }
            else {
                console.error('Invalid `o-app-layout` mode (' + val + ')');
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(OAppLayoutComponent.prototype, "sidenavMode", {
        get: function () {
            return this._sidenavMode;
        },
        set: function (val) {
            var m = Codes.OSidenavModes.find(function (e) { return e === val; });
            if (Util.isDefined(m)) {
                this._sidenavMode = m;
            }
            else {
                console.error('Invalid `o-app-layout` sidenav-mode (' + val + ')');
            }
        },
        enumerable: true,
        configurable: true
    });
    OAppLayoutComponent.prototype.sidenavToggle = function (opened) {
        opened ? this.beforeOpenSidenav.emit() : this.beforeCloseSidenav.emit();
    };
    OAppLayoutComponent.prototype.afterToggle = function (opened) {
        opened ? this.afterOpenSidenav.emit() : this.afterCloseSidenav.emit();
    };
    OAppLayoutComponent.prototype.ngAfterViewInit = function () {
        if (this.appHeader && this.appHeader.userInfo) {
            this.appHeader.userInfo.registerUserInfoConfiguration(this.userInfoConfiguration);
        }
    };
    OAppLayoutComponent.decorators = [
        { type: Component, args: [{
                    selector: 'o-app-layout',
                    inputs: DEFAULT_INPUTS_O_APP_LAYOUT,
                    outputs: DEFAULT_OUTPUTS_O_APP_LAYOUT,
                    template: "<o-app-sidenav #appSidenav [sidenav-mode]=\"sidenavMode\" [opened]=\"sidenavOpened\" [show-user-info]=\"showUserInfo\" [show-toggle-button]=\"!showHeader\"\n  [opened-sidenav-image]=\"openedSidenavImg\" [closed-sidenav-image]=\"closedSidenavImg\" [layout-mode]=\"mode\" [class.header-layout]=\"showHeader\"\n  (onSidenavToggle)=\"sidenavToggle($event)\" (afterSidenavToggle)=\"afterToggle($event)\">\n\n  <ng-content select=\"o-app-layout-sidenav[position=start]\" ngProjectAs=\"o-app-layout-sidenav-projection-start\">\n  </ng-content>\n  <ng-content select=\"o-app-layout-sidenav[position=end]\" ngProjectAs=\"o-app-layout-sidenav-projection-end\">\n  </ng-content>\n  <ng-content select=\"o-app-layout-sidenav\" ngProjectAs=\"o-app-layout-sidenav-projection-end\"></ng-content>\n\n  <o-app-header #appHeader *ngIf=\"showHeader\" [show-title]=\"showTitle\" [show-static-title]=\"showStaticTitle\" [static-title]=\"staticTitle\"\n    [show-user-info]=\"showUserInfo\" [show-language-selector]=\"showLanguageSelector\" [use-flag-icons]=\"useFlagIcons\"\n    (onSidenavToggle)=\"appSidenav.toggleSidenav()\" [color]=\"headerColor\" [header-height]=\"headerHeight\">\n    <mat-icon class=\"sidenav-toggle\" svgIcon=\"ontimize:menu\" (click)=\"appSidenav.toggleSidenav()\" *ngIf=\"appSidenav.isMobileMode()\"></mat-icon>\n    <ng-content select=\"o-app-layout-header[position=start]\" ngProjectAs=\"o-app-layout-header-projection-start\">\n    </ng-content>\n    <ng-content select=\"o-app-layout-header[position=end]\" ngProjectAs=\"o-app-layout-header-projection-end\">\n    </ng-content>\n    <ng-content select=\"o-app-layout-header\" ngProjectAs=\"o-app-layout-header-projection-start\"></ng-content>\n  </o-app-header>\n\n  <div class=\"application-layout-content-wrapper\" [class.header-layout]=\"showHeader\">\n    <ng-content></ng-content>\n  </div>\n</o-app-sidenav>\n",
                    encapsulation: ViewEncapsulation.None,
                    styles: [".application-layout-content-wrapper{z-index:1;position:absolute;top:0;bottom:0;left:0;right:0;overflow:auto;padding:16px}"]
                }] }
    ];
    OAppLayoutComponent.propDecorators = {
        appSidenav: [{ type: ViewChild, args: ['appSidenav', { static: false },] }],
        appHeader: [{ type: ViewChild, args: ['appHeader', { static: false },] }],
        userInfoConfiguration: [{ type: ContentChild, args: [OUserInfoConfigurationDirective, { static: false },] }]
    };
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "sidenavOpened", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "showUserInfo", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "showLanguageSelector", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "useFlagIcons", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "_showHeader", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "showTitle", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", String)
    ], OAppLayoutComponent.prototype, "staticTitle", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppLayoutComponent.prototype, "showStaticTitle", void 0);
    return OAppLayoutComponent;
}());
export { OAppLayoutComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1hcHAtbGF5b3V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL29udGltaXplLXdlYi1uZ3gvIiwic291cmNlcyI6WyJsaWIvbGF5b3V0cy9hcHAtbGF5b3V0L28tYXBwLWxheW91dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR25ILE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ3pGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQzVGLE9BQU8sRUFBRSwrQkFBK0IsRUFBRSxNQUFNLHdGQUF3RixDQUFDO0FBQ3pJLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUNsRSxPQUFPLEVBQUUsS0FBSyxFQUFnQyxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUd2QyxNQUFNLENBQUMsSUFBTSwyQkFBMkIsR0FBRztJQUN6QyxNQUFNO0lBQ04sMkJBQTJCO0lBQzNCLCtCQUErQjtJQUMvQiwwQkFBMEI7SUFDMUIsOEJBQThCO0lBQzlCLDhDQUE4QztJQUM5Qyw4QkFBOEI7SUFDOUIsd0NBQXdDO0lBQ3hDLHdDQUF3QztJQUN4QywyQkFBMkI7SUFDM0IsNkJBQTZCO0lBQzdCLHVCQUF1QjtJQUN2QiwyQkFBMkI7SUFDM0Isb0NBQW9DO0NBRXJDLENBQUM7QUFFRixNQUFNLENBQUMsSUFBTSw0QkFBNEIsR0FBVTtJQUNqRCxtQkFBbUI7SUFDbkIsa0JBQWtCO0lBQ2xCLG9CQUFvQjtJQUNwQixtQkFBbUI7Q0FDcEIsQ0FBQztBQUVGO0lBQUE7UUFZRSxrQkFBYSxHQUFZLElBQUksQ0FBQztRQUU5QixpQkFBWSxHQUFZLElBQUksQ0FB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LENBQUM7O2dCQXBHRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGNBQWM7b0JBQ3hCLE1BQU0sRUFBRSwyQkFBMkI7b0JBQ25DLE9BQU8sRUFBRSw0QkFBNEI7b0JBQ3JDLCsxREFBNEM7b0JBRTVDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOztpQkFDdEM7Ozs2QkF3QkUsU0FBUyxTQUFDLFlBQVksRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7NEJBR3pDLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO3dDQUd4QyxZQUFZLFNBQUMsK0JBQStCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFOztJQXpCaEU7UUFEQyxjQUFjLEVBQUU7OzhEQUNhO0lBRTlCO1FBREMsY0FBYyxFQUFFOzs2REFDWTtJQUU3QjtRQURDLGNBQWMsRUFBRTs7cUVBQ29CO0lBRXJDO1FBREMsY0FBYyxFQUFFOzs2REFDYTtJQUU5QjtRQURDLGNBQWMsRUFBRTs7NERBQ3FCO0lBRXRDO1FBREMsY0FBYyxFQUFFOzswREFDaUI7SUFFbEM7UUFEQyxjQUFjLEVBQUU7OzREQUNVO0lBRTNCO1FBREMsY0FBYyxFQUFFOztnRUFDdUI7SUE0RTFDLDBCQUFDO0NBQUEsQUF0R0QsSUFzR0M7U0E3RlksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBDb250ZW50Q2hpbGQsIEV2ZW50RW1pdHRlciwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGhlbWVQYWxldHRlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuXG5pbXBvcnQgeyBPQXBwSGVhZGVyQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9hcHAtaGVhZGVyL28tYXBwLWhlYWRlci5jb21wb25lbnQnO1xuaW1wb3J0IHsgT0FwcFNpZGVuYXZDb21wb25lbnQgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2FwcC1zaWRlbmF2L28tYXBwLXNpZGVuYXYuY29tcG9uZW50JztcbmltcG9ydCB7IE9Vc2VySW5mb0NvbmZpZ3VyYXRpb25EaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL3VzZXItaW5mby91c2VyLWluZm8tY29uZmlndXJhdGlvbi9vLXVzZXItaW5mby1jb25maWd1cmF0aW9uLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBJbnB1dENvbnZlcnRlciB9IGZyb20gJy4uLy4uL2RlY29yYXRvcnMvaW5wdXQtY29udmVydGVyJztcbmltcG9ydCB7IENvZGVzLCBPQXBwTGF5b3V0TW9kZSwgT1NpZGVuYXZNb2RlIH0gZnJvbSAnLi4vLi4vdXRpbC9jb2Rlcyc7XG5pbXBvcnQgeyBVdGlsIH0gZnJvbSAnLi4vLi4vdXRpbC91dGlsJztcblxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9JTlBVVFNfT19BUFBfTEFZT1VUID0gW1xuICAnbW9kZScsXG4gICdzaWRlbmF2TW9kZTogc2lkZW5hdi1tb2RlJyxcbiAgJ3NpZGVuYXZPcGVuZWQ6IHNpZGVuYXYtb3BlbmVkJyxcbiAgJ19zaG93SGVhZGVyOiBzaG93LWhlYWRlcicsXG4gICdzaG93VXNlckluZm86IHNob3ctdXNlci1pbmZvJyxcbiAgJ3Nob3dMYW5ndWFnZVNlbGVjdG9yOiBzaG93LWxhbmd1YWdlLXNlbGVjdG9yJyxcbiAgJ3VzZUZsYWdJY29uczogdXNlLWZsYWctaWNvbnMnLFxuICAnb3BlbmVkU2lkZW5hdkltZzogb3BlbmVkLXNpZGVuYXYtaW1hZ2UnLFxuICAnY2xvc2VkU2lkZW5hdkltZzogY2xvc2VkLXNpZGVuYXYtaW1hZ2UnLFxuICAnaGVhZGVyQ29sb3I6IGhlYWRlci1jb2xvcicsXG4gICdoZWFkZXJIZWlnaHQ6IGhlYWRlci1oZWlnaHQnLFxuICAnc2hvd1RpdGxlOiBzaG93LXRpdGxlJyxcbiAgJ3N0YXRpY1RpdGxlOiBzdGF0aWMtdGl0bGUnLFxuICAnc2hvd1N0YXRpY1RpdGxlOiBzaG93LXN0YXRpYy10aXRsZSdcblxuXTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1VUUFVUU19PX0FQUF9MQVlPVVQ6IGFueVtdID0gW1xuICAnYmVmb3JlT3BlblNpZGVuYXYnLFxuICAnYWZ0ZXJPcGVuU2lkZW5hdicsXG4gICdiZWZvcmVDbG9zZVNpZGVuYXYnLFxuICAnYWZ0ZXJDbG9zZVNpZGVuYXYnXG5dO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdvLWFwcC1sYXlvdXQnLFxuICBpbnB1dHM6IERFRkFVTFRfSU5QVVRTX09fQVBQX0xBWU9VVCxcbiAgb3V0cHV0czogREVGQVVMVF9PVVRQVVRTX09fQVBQX0xBWU9VVCxcbiAgdGVtcGxhdGVVcmw6ICcuL28tYXBwLWxheW91dC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL28tYXBwLWxheW91dC5jb21wb25lbnQuc2NzcyddLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lXG59KVxuXG5leHBvcnQgY2xhc3MgT0FwcExheW91dENvbXBvbmVudCBpbXBsZW1lbnRzIEFmdGVyVmlld0luaXQge1xuXG4gIEBJbnB1dENvbnZlcnRlcigpXG4gIHNpZGVuYXZPcGVuZWQ6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICBzaG93VXNlckluZm86IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICBzaG93TGFuZ3VhZ2VTZWxlY3RvcjogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dENvbnZlcnRlcigpXG4gIHVzZUZsYWdJY29uczogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICBwcm90ZWN0ZWQgX3Nob3dIZWFkZXI6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICBwdWJsaWMgc2hvd1RpdGxlOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dENvbnZlcnRlcigpXG4gIHB1YmxpYyBzdGF0aWNUaXRsZTogc3RyaW5nO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICBwdWJsaWMgc2hvd1N0YXRpY1RpdGxlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGhlYWRlckNvbG9yOiBUaGVtZVBhbGV0dGU7XG4gIHB1YmxpYyBoZWFkZXJIZWlnaHQgPSBDb2Rlcy5ERUZBVUxUX1JPV19IRUlHSFQ7XG5cbiAgQFZpZXdDaGlsZCgnYXBwU2lkZW5hdicsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBwdWJsaWMgYXBwU2lkZW5hdjogT0FwcFNpZGVuYXZDb21wb25lbnQ7XG5cbiAgQFZpZXdDaGlsZCgnYXBwSGVhZGVyJywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIHB1YmxpYyBhcHBIZWFkZXI6IE9BcHBIZWFkZXJDb21wb25lbnQ7XG5cbiAgQENvbnRlbnRDaGlsZChPVXNlckluZm9Db25maWd1cmF0aW9uRGlyZWN0aXZlLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgcHVibGljIHVzZXJJbmZvQ29uZmlndXJhdGlvbjogT1VzZXJJbmZvQ29uZmlndXJhdGlvbkRpcmVjdGl2ZTtcblxuICBwcm90ZWN0ZWQgX21vZGU6IE9BcHBMYXlvdXRNb2RlO1xuICBwcm90ZWN0ZWQgX3NpZGVuYXZNb2RlOiBPU2lkZW5hdk1vZGU7XG5cbiAgb3BlbmVkU2lkZW5hdkltZzogc3RyaW5nO1xuICBjbG9zZWRTaWRlbmF2SW1nOiBzdHJpbmc7XG5cbiAgYmVmb3JlT3BlblNpZGVuYXY6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcbiAgYWZ0ZXJPcGVuU2lkZW5hdjogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuICBiZWZvcmVDbG9zZVNpZGVuYXY6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcbiAgYWZ0ZXJDbG9zZVNpZGVuYXY6IEV2ZW50RW1pdHRlcjxib29sZWFuPiA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblxuICBnZXQgc2hvd0hlYWRlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fc2hvd0hlYWRlcjtcbiAgfVxuXG4gIHNldCBzaG93SGVhZGVyKHZhbDogYm9vbGVhbikge1xuICAgIHRoaXMuX3Nob3dIZWFkZXIgPSB2YWw7XG4gIH1cblxuICBnZXQgbW9kZSgpOiBPQXBwTGF5b3V0TW9kZSB7XG4gICAgcmV0dXJuIHRoaXMuX21vZGU7XG4gIH1cblxuICBzZXQgbW9kZSh2YWw6IE9BcHBMYXlvdXRNb2RlKSB7XG4gICAgY29uc3QgbSA9IENvZGVzLk9BcHBMYXlvdXRNb2Rlcy5maW5kKGUgPT4gZSA9PT0gdmFsKTtcbiAgICBpZiAoVXRpbC5pc0RlZmluZWQobSkpIHtcbiAgICAgIHRoaXMuX21vZGUgPSBtO1xuICAgICAgaWYgKHRoaXMuX21vZGUgPT09ICdtb2JpbGUnICYmICFVdGlsLmlzRGVmaW5lZCh0aGlzLnNob3dIZWFkZXIpKSB7XG4gICAgICAgIHRoaXMuc2hvd0hlYWRlciA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYG8tYXBwLWxheW91dGAgbW9kZSAoJyArIHZhbCArICcpJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNpZGVuYXZNb2RlKCk6IE9TaWRlbmF2TW9kZSB7XG4gICAgcmV0dXJuIHRoaXMuX3NpZGVuYXZNb2RlO1xuICB9XG5cbiAgc2V0IHNpZGVuYXZNb2RlKHZhbDogT1NpZGVuYXZNb2RlKSB7XG4gICAgY29uc3QgbSA9IENvZGVzLk9TaWRlbmF2TW9kZXMuZmluZChlID0+IGUgPT09IHZhbCk7XG4gICAgaWYgKFV0aWwuaXNEZWZpbmVkKG0pKSB7XG4gICAgICB0aGlzLl9zaWRlbmF2TW9kZSA9IG07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgYG8tYXBwLWxheW91dGAgc2lkZW5hdi1tb2RlICgnICsgdmFsICsgJyknKTtcbiAgICB9XG4gIH1cblxuICBzaWRlbmF2VG9nZ2xlKG9wZW5lZDogYm9vbGVhbikge1xuICAgIG9wZW5lZCA/IHRoaXMuYmVmb3JlT3BlblNpZGVuYXYuZW1pdCgpIDogdGhpcy5iZWZvcmVDbG9zZVNpZGVuYXYuZW1pdCgpO1xuICB9XG5cbiAgYWZ0ZXJUb2dnbGUob3BlbmVkOiBib29sZWFuKSB7XG4gICAgb3BlbmVkID8gdGhpcy5hZnRlck9wZW5TaWRlbmF2LmVtaXQoKSA6IHRoaXMuYWZ0ZXJDbG9zZVNpZGVuYXYuZW1pdCgpO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmFwcEhlYWRlciAmJiB0aGlzLmFwcEhlYWRlci51c2VySW5mbykge1xuICAgICAgdGhpcy5hcHBIZWFkZXIudXNlckluZm8ucmVnaXN0ZXJVc2VySW5mb0NvbmZpZ3VyYXRpb24odGhpcy51c2VySW5mb0NvbmZpZ3VyYXRpb24pO1xuICAgIH1cbiAgfVxuXG59XG4iXX0=