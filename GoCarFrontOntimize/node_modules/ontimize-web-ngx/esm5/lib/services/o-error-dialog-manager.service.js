import { Injectable } from '@angular/core';
import { Util } from '../util/util';
import { DialogService } from './dialog.service';
import * as i0 from "@angular/core";
import * as i1 from "./dialog.service";
var OErrorDialogManager = (function () {
    function OErrorDialogManager(dialogService) {
        this.dialogService = dialogService;
    }
    OErrorDialogManager.prototype.restart = function () {
        this.errorDialogSubscription = null;
    };
    OErrorDialogManager.prototype.openErrorDialog = function (err) {
        var _this = this;
        if (!Util.isDefined(this.errorDialogSubscription)) {
            this.errorDialogSubscription = new Promise(function (resolve) {
                var errorMsg = (err && typeof err !== 'object') ? err : 'MESSAGES.ERROR_QUERY';
                _this.dialogService.alert('ERROR', errorMsg).then(function (res) {
                    _this.restart();
                    resolve(res);
                });
            });
        }
        return this.errorDialogSubscription;
    };
    OErrorDialogManager.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    OErrorDialogManager.ctorParameters = function () { return [
        { type: DialogService }
    ]; };
    OErrorDialogManager.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function OErrorDialogManager_Factory() { return new OErrorDialogManager(i0.ɵɵinject(i1.DialogService)); }, token: OErrorDialogManager, providedIn: "root" });
    return OErrorDialogManager;
}());
export { OErrorDialogManager };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1lcnJvci1kaWFsb2ctbWFuYWdlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vb250aW1pemUtd2ViLW5neC8iLCJzb3VyY2VzIjpbImxpYi9zZXJ2aWNlcy9vLWVycm9yLWRpYWxvZy1tYW5hZ2VyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7O0FBR2pEO0lBT0UsNkJBQXNCLGFBQTRCO1FBQTVCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO0lBQUksQ0FBQztJQUU3QyxxQ0FBTyxHQUFqQjtRQUNFLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUM7SUFDdEMsQ0FBQztJQUVNLDZDQUFlLEdBQXRCLFVBQXVCLEdBQVE7UUFBL0IsaUJBV0M7UUFWQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsRUFBRTtZQUNqRCxJQUFJLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPO2dCQUNqRCxJQUFNLFFBQVEsR0FBRyxDQUFDLEdBQUcsSUFBSSxPQUFPLEdBQUcsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQztnQkFDakYsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFBLEdBQUc7b0JBQ2xELEtBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztvQkFDZixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ2YsQ0FBQyxDQUFDLENBQUM7WUFDTCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBQ0QsT0FBTyxJQUFJLENBQUMsdUJBQXVCLENBQUM7SUFDdEMsQ0FBQzs7Z0JBeEJGLFVBQVUsU0FBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkI7OztnQkFMUSxhQUFhOzs7OEJBRnRCO0NBOEJDLEFBekJELElBeUJDO1NBdEJZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFV0aWwgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZSB9IGZyb20gJy4vZGlhbG9nLnNlcnZpY2UnO1xuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE9FcnJvckRpYWxvZ01hbmFnZXIge1xuXG4gIHByb3RlY3RlZCBlcnJvckRpYWxvZ1N1YnNjcmlwdGlvbjogUHJvbWlzZTxib29sZWFuPjtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgZGlhbG9nU2VydmljZTogRGlhbG9nU2VydmljZSkgeyB9XG5cbiAgcHJvdGVjdGVkIHJlc3RhcnQoKSB7XG4gICAgdGhpcy5lcnJvckRpYWxvZ1N1YnNjcmlwdGlvbiA9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgb3BlbkVycm9yRGlhbG9nKGVycj86YW55KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgaWYgKCFVdGlsLmlzRGVmaW5lZCh0aGlzLmVycm9yRGlhbG9nU3Vic2NyaXB0aW9uKSkge1xuICAgICAgdGhpcy5lcnJvckRpYWxvZ1N1YnNjcmlwdGlvbiA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gKGVyciAmJiB0eXBlb2YgZXJyICE9PSAnb2JqZWN0JykgPyBlcnIgOiAnTUVTU0FHRVMuRVJST1JfUVVFUlknO1xuICAgICAgICB0aGlzLmRpYWxvZ1NlcnZpY2UuYWxlcnQoJ0VSUk9SJywgZXJyb3JNc2cpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICB0aGlzLnJlc3RhcnQoKTtcbiAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVycm9yRGlhbG9nU3Vic2NyaXB0aW9uO1xuICB9XG59XG4iXX0=