import * as tslib_1 from "tslib";
import { Component, EventEmitter, Injector, ViewChild, ViewEncapsulation } from '@angular/core';
import { InputConverter } from '../../decorators/input-converter';
import { AuthService } from '../../services';
import { DialogService } from '../../services/dialog.service';
import { OModulesInfoService } from '../../services/o-modules-info.service';
import { Codes } from '../../util';
import { OUserInfoComponent } from '../user-info/o-user-info.component';
export var DEFAULT_INPUTS_O_APP_HEADER = [
    'showUserInfo: show-user-info',
    'showLanguageSelector: show-language-selector',
    'useFlagIcons: use-flag-icons',
    'color',
    'headerHeight:header-height',
    'showTitle: show-title',
    'staticTitle: static-title',
    'showStaticTitle: show-static-title'
];
export var DEFAULT_OUTPUTS_O_APP_HEADER = [
    'onSidenavToggle'
];
var OAppHeaderComponent = (function () {
    function OAppHeaderComponent(injector) {
        this.injector = injector;
        this.showTitle = false;
        this.showStaticTitle = false;
        this.showUserInfo = true;
        this.showLanguageSelector = true;
        this.useFlagIcons = false;
        this.onSidenavToggle = new EventEmitter();
        this._headerHeight = Codes.DEFAULT_ROW_HEIGHT;
        this.dialogService = this.injector.get(DialogService);
        this.modulesInfoService = this.injector.get(OModulesInfoService);
        this.authService = this.injector.get(AuthService);
    }
    Object.defineProperty(OAppHeaderComponent.prototype, "headerHeight", {
        get: function () {
            return this._headerHeight;
        },
        set: function (value) {
            this._headerHeight = value ? value.toLowerCase() : value;
            if (!Codes.isValidRowHeight(this._headerHeight)) {
                this._headerHeight = Codes.DEFAULT_ROW_HEIGHT;
            }
        },
        enumerable: true,
        configurable: true
    });
    OAppHeaderComponent.prototype.ngOnInit = function () {
        if (!this.showStaticTitle) {
            this.headerTitle$ = this.modulesInfoService.getModuleChangeObservable();
        }
    };
    OAppHeaderComponent.prototype.onLogoutClick = function () {
        this.authService.logoutWithConfirmation();
    };
    Object.defineProperty(OAppHeaderComponent.prototype, "color", {
        get: function () {
            return this._color;
        },
        set: function (newValue) {
            this._color = newValue;
        },
        enumerable: true,
        configurable: true
    });
    OAppHeaderComponent.decorators = [
        { type: Component, args: [{
                    selector: 'o-app-header',
                    inputs: DEFAULT_INPUTS_O_APP_HEADER,
                    outputs: DEFAULT_OUTPUTS_O_APP_HEADER,
                    template: "<nav fxFlex fxLayout=\"row\" fxLayoutAlign=\"space-between stretch\" [ngClass]=\"color ? 'o-app-header-'+color : ''\">\n  <div fxFlex fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n    <ng-content></ng-content>\n    <ng-content select=\"o-app-layout-header-projection-start\"></ng-content>\n    <span *ngIf=\"showTitle && !showStaticTitle\" class=\"o-app-header-title\" fxLayout=\"row\" fxLayoutAlign=\"center center\">\n      {{ headerTitle$ | async | oTranslate }}\n    </span>\n    <span *ngIf=\"showTitle && showStaticTitle\" class=\"o-app-header-title\" fxLayout=\"row\" fxLayoutAlign=\"center center\">\n      {{ staticTitle | oTranslate }}\n    </span>\n    <div fxLayout=\"row\" fxLayoutAlign=\"end stretch\" class=\"o-app-header-default-actions\">\n      <div class=\"layout-header-projection-end\">\n        <ng-content select=\"o-app-layout-header-projection-end\"></ng-content>\n      </div>\n      <o-user-info #userInfo *ngIf=\"showUserInfo\"></o-user-info>\n      <o-language-selector *ngIf=\"showLanguageSelector\" [use-flag-icons]=\"useFlagIcons\"></o-language-selector>\n    </div>\n  </div>\n</nav>\n",
                    encapsulation: ViewEncapsulation.None,
                    host: {
                        '[class.o-app-header]': 'true',
                        '[class.o-app-header-small]': 'headerHeight==="small"',
                        '[class.o-app-header-medium]': 'headerHeight==="medium"',
                        '[class.o-app-header-large]': 'headerHeight==="large"'
                    },
                    styles: [".o-app-header{z-index:2;box-shadow:0 2px 6px #00000029}.o-app-header.o-app-header-large{height:56px}.o-app-header.o-app-header-large+.header-layout{top:56px}.o-app-header.o-app-header-large .o-user-info{font-size:16px}.o-app-header.o-app-header-large .o-user-info .o-user-info-avatar-wrapper{height:40px;width:40px}.o-app-header.o-app-header-medium{height:48px}.o-app-header.o-app-header-medium+.header-layout{top:48px}.o-app-header.o-app-header-medium .o-user-info{font-size:16px}.o-app-header.o-app-header-medium .o-user-info .o-user-info-avatar-wrapper{height:32px;width:32px}.o-app-header.o-app-header-small{height:40px}.o-app-header.o-app-header-small+.header-layout{top:40px}.o-app-header.o-app-header-small .o-user-info{font-size:14px}.o-app-header.o-app-header-small .o-user-info .o-user-info-avatar-wrapper{height:30px;width:30px}.o-app-header nav{padding-right:16px}.o-app-header nav .sidenav-toggle{text-align:center;padding:16px;cursor:pointer}.o-app-header nav .o-app-header-title{padding:0 16px;cursor:default}.o-app-header nav .o-app-header-default-actions{margin-left:auto}.o-app-header nav .o-app-header-default-actions .layout-header-projection-end{margin-right:16px}"]
                }] }
    ];
    OAppHeaderComponent.ctorParameters = function () { return [
        { type: Injector }
    ]; };
    OAppHeaderComponent.propDecorators = {
        userInfo: [{ type: ViewChild, args: ['userInfo', { static: false },] }]
    };
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppHeaderComponent.prototype, "showUserInfo", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppHeaderComponent.prototype, "showLanguageSelector", void 0);
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OAppHeaderComponent.prototype, "useFlagIcons", void 0);
    return OAppHeaderComponent;
}());
export { OAppHeaderComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1hcHAtaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL29udGltaXplLXdlYi1uZ3gvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9hcHAtaGVhZGVyL28tYXBwLWhlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBUSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdEcsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ2xFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDNUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFlBQVksQ0FBQztBQUNuQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUV4RSxNQUFNLENBQUMsSUFBTSwyQkFBMkIsR0FBRztJQUN6Qyw4QkFBOEI7SUFDOUIsOENBQThDO0lBQzlDLDhCQUE4QjtJQUM5QixPQUFPO0lBQ1AsNEJBQTRCO0lBQzVCLHVCQUF1QjtJQUN2QiwyQkFBMkI7SUFDM0Isb0NBQW9DO0NBQ3JDLENBQUM7QUFFRixNQUFNLENBQUMsSUFBTSw0QkFBNEIsR0FBRztJQUMxQyxpQkFBaUI7Q0FDbEIsQ0FBQztBQUVGO0lBa0RFLDZCQUNZLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFoQ3ZCLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFDbEIsb0JBQWUsR0FBRyxLQUFLLENBQUM7UUFRL0IsaUJBQVksR0FBWSxJQUFJLENBQUM7UUFFN0IseUJBQW9CLEdBQVksSUFBSSxDQUFDO1FBRXJDLGlCQUFZLEdBQVksS0FBSyxDQUFDO1FBRXZCLG9CQUFlLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUN4QyxrQkFBYSxHQUFHLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQztRQWtCakQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBZ0IsYUFBb0MsQ0FBQyxDQUFDO1FBQzVGLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBc0IsbUJBQWdELENBQUMsQ0FBQztRQUNuSCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFjLFdBQWdDLENBQUMsQ0FBQztJQUN0RixDQUFDO0lBbkJELHNCQUFJLDZDQUFZO2FBT2hCO1lBQ0UsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQzVCLENBQUM7YUFURCxVQUFpQixLQUFLO1lBQ3BCLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUN6RCxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRTtnQkFDL0MsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUMsa0JBQWtCLENBQUM7YUFDL0M7UUFDSCxDQUFDOzs7T0FBQTtJQWVELHNDQUFRLEdBQVI7UUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN6QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1NBQ3pFO0lBQ0gsQ0FBQztJQUNELDJDQUFhLEdBQWI7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLHNCQUFzQixFQUFFLENBQUM7SUFDNUMsQ0FBQztJQUNELHNCQUFJLHNDQUFLO2FBSVQ7WUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDckIsQ0FBQzthQU5ELFVBQVUsUUFBc0I7WUFDOUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUM7UUFDekIsQ0FBQzs7O09BQUE7O2dCQW5FRixTQUFTLFNBQUM7b0JBQ1QsUUFBUSxFQUFFLGNBQWM7b0JBQ3hCLE1BQU0sRUFBRSwyQkFBMkI7b0JBQ25DLE9BQU8sRUFBRSw0QkFBNEI7b0JBQ3JDLHNuQ0FBNEM7b0JBRTVDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO29CQUNyQyxJQUFJLEVBQUU7d0JBQ0osc0JBQXNCLEVBQUUsTUFBTTt3QkFDOUIsNEJBQTRCLEVBQUUsd0JBQXdCO3dCQUN0RCw2QkFBNkIsRUFBRSx5QkFBeUI7d0JBQ3hELDRCQUE0QixFQUFFLHdCQUF3QjtxQkFDdkQ7O2lCQUNGOzs7Z0JBdkNpQyxRQUFROzs7MkJBa0R2QyxTQUFTLFNBQUMsVUFBVSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs7SUFJeEM7UUFEQyxjQUFjLEVBQUU7OzZEQUNZO0lBRTdCO1FBREMsY0FBYyxFQUFFOztxRUFDb0I7SUFFckM7UUFEQyxjQUFjLEVBQUU7OzZEQUNhO0lBeUNoQywwQkFBQztDQUFBLEFBekVELElBeUVDO1NBM0RZLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbmplY3RvciwgVHlwZSwgVmlld0NoaWxkLCBWaWV3RW5jYXBzdWxhdGlvbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGhlbWVQYWxldHRlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBJbnB1dENvbnZlcnRlciB9IGZyb20gJy4uLy4uL2RlY29yYXRvcnMvaW5wdXQtY29udmVydGVyJztcbmltcG9ydCB7IEF1dGhTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMnO1xuaW1wb3J0IHsgRGlhbG9nU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2RpYWxvZy5zZXJ2aWNlJztcbmltcG9ydCB7IE9Nb2R1bGVzSW5mb1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9vLW1vZHVsZXMtaW5mby5zZXJ2aWNlJztcbmltcG9ydCB7IENvZGVzIH0gZnJvbSAnLi4vLi4vdXRpbCc7XG5pbXBvcnQgeyBPVXNlckluZm9Db21wb25lbnQgfSBmcm9tICcuLi91c2VyLWluZm8vby11c2VyLWluZm8uY29tcG9uZW50JztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfSU5QVVRTX09fQVBQX0hFQURFUiA9IFtcbiAgJ3Nob3dVc2VySW5mbzogc2hvdy11c2VyLWluZm8nLFxuICAnc2hvd0xhbmd1YWdlU2VsZWN0b3I6IHNob3ctbGFuZ3VhZ2Utc2VsZWN0b3InLFxuICAndXNlRmxhZ0ljb25zOiB1c2UtZmxhZy1pY29ucycsXG4gICdjb2xvcicsXG4gICdoZWFkZXJIZWlnaHQ6aGVhZGVyLWhlaWdodCcsXG4gICdzaG93VGl0bGU6IHNob3ctdGl0bGUnLFxuICAnc3RhdGljVGl0bGU6IHN0YXRpYy10aXRsZScsXG4gICdzaG93U3RhdGljVGl0bGU6IHNob3ctc3RhdGljLXRpdGxlJ1xuXTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1VUUFVUU19PX0FQUF9IRUFERVIgPSBbXG4gICdvblNpZGVuYXZUb2dnbGUnXG5dO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdvLWFwcC1oZWFkZXInLFxuICBpbnB1dHM6IERFRkFVTFRfSU5QVVRTX09fQVBQX0hFQURFUixcbiAgb3V0cHV0czogREVGQVVMVF9PVVRQVVRTX09fQVBQX0hFQURFUixcbiAgdGVtcGxhdGVVcmw6ICcuL28tYXBwLWhlYWRlci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL28tYXBwLWhlYWRlci5jb21wb25lbnQuc2NzcyddLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBob3N0OiB7XG4gICAgJ1tjbGFzcy5vLWFwcC1oZWFkZXJdJzogJ3RydWUnLFxuICAgICdbY2xhc3Muby1hcHAtaGVhZGVyLXNtYWxsXSc6ICdoZWFkZXJIZWlnaHQ9PT1cInNtYWxsXCInLFxuICAgICdbY2xhc3Muby1hcHAtaGVhZGVyLW1lZGl1bV0nOiAnaGVhZGVySGVpZ2h0PT09XCJtZWRpdW1cIicsXG4gICAgJ1tjbGFzcy5vLWFwcC1oZWFkZXItbGFyZ2VdJzogJ2hlYWRlckhlaWdodD09PVwibGFyZ2VcIidcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBPQXBwSGVhZGVyQ29tcG9uZW50IHtcblxuICBwcm90ZWN0ZWQgZGlhbG9nU2VydmljZTogRGlhbG9nU2VydmljZTtcbiAgcHJvdGVjdGVkIG1vZHVsZXNJbmZvU2VydmljZTogT01vZHVsZXNJbmZvU2VydmljZTtcbiAgcHJvdGVjdGVkIGF1dGhTZXJ2aWNlOiBBdXRoU2VydmljZTtcbiAgcHVibGljIHNob3dUaXRsZSA9IGZhbHNlO1xuICBwdWJsaWMgc2hvd1N0YXRpY1RpdGxlID0gZmFsc2U7XG4gIHB1YmxpYyBzdGF0aWNUaXRsZTogc3RyaW5nO1xuICBwdWJsaWMgaGVhZGVyVGl0bGUkOiBPYnNlcnZhYmxlPHN0cmluZz47XG5cbiAgQFZpZXdDaGlsZCgndXNlckluZm8nLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgcHVibGljIHVzZXJJbmZvOiBPVXNlckluZm9Db21wb25lbnQ7XG5cbiAgQElucHV0Q29udmVydGVyKClcbiAgc2hvd1VzZXJJbmZvOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0Q29udmVydGVyKClcbiAgc2hvd0xhbmd1YWdlU2VsZWN0b3I6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXRDb252ZXJ0ZXIoKVxuICB1c2VGbGFnSWNvbnM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgb25TaWRlbmF2VG9nZ2xlID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuICBwcm90ZWN0ZWQgX2hlYWRlckhlaWdodCA9IENvZGVzLkRFRkFVTFRfUk9XX0hFSUdIVDtcblxuICBzZXQgaGVhZGVySGVpZ2h0KHZhbHVlKSB7XG4gICAgdGhpcy5faGVhZGVySGVpZ2h0ID0gdmFsdWUgPyB2YWx1ZS50b0xvd2VyQ2FzZSgpIDogdmFsdWU7XG4gICAgaWYgKCFDb2Rlcy5pc1ZhbGlkUm93SGVpZ2h0KHRoaXMuX2hlYWRlckhlaWdodCkpIHtcbiAgICAgIHRoaXMuX2hlYWRlckhlaWdodCA9IENvZGVzLkRFRkFVTFRfUk9XX0hFSUdIVDtcbiAgICB9XG4gIH1cblxuICBnZXQgaGVhZGVySGVpZ2h0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2hlYWRlckhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbG9yOiBUaGVtZVBhbGV0dGU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIGluamVjdG9yOiBJbmplY3RvcixcbiAgKSB7XG4gICAgdGhpcy5kaWFsb2dTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQ8RGlhbG9nU2VydmljZT4oRGlhbG9nU2VydmljZSBhcyBUeXBlPERpYWxvZ1NlcnZpY2U+KTtcbiAgICB0aGlzLm1vZHVsZXNJbmZvU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PE9Nb2R1bGVzSW5mb1NlcnZpY2U+KE9Nb2R1bGVzSW5mb1NlcnZpY2UgYXMgVHlwZTxPTW9kdWxlc0luZm9TZXJ2aWNlPik7XG4gICAgdGhpcy5hdXRoU2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PEF1dGhTZXJ2aWNlPihBdXRoU2VydmljZSBhcyBUeXBlPEF1dGhTZXJ2aWNlPik7XG4gIH1cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCF0aGlzLnNob3dTdGF0aWNUaXRsZSkge1xuICAgICAgdGhpcy5oZWFkZXJUaXRsZSQgPSB0aGlzLm1vZHVsZXNJbmZvU2VydmljZS5nZXRNb2R1bGVDaGFuZ2VPYnNlcnZhYmxlKCk7XG4gICAgfVxuICB9XG4gIG9uTG9nb3V0Q2xpY2soKSB7XG4gICAgdGhpcy5hdXRoU2VydmljZS5sb2dvdXRXaXRoQ29uZmlybWF0aW9uKCk7XG4gIH1cbiAgc2V0IGNvbG9yKG5ld1ZhbHVlOiBUaGVtZVBhbGV0dGUpIHtcbiAgICB0aGlzLl9jb2xvciA9IG5ld1ZhbHVlO1xuICB9XG5cbiAgZ2V0IGNvbG9yKCk6IFRoZW1lUGFsZXR0ZSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xuICB9XG5cbn1cbiJdfQ==