import * as tslib_1 from "tslib";
import { Component, ComponentFactoryResolver, ContentChildren, EventEmitter, forwardRef, QueryList, ViewChild, ViewContainerRef, ViewEncapsulation } from '@angular/core';
import { MatButtonToggleGroup } from '@angular/material';
import { InputConverter } from '../../../decorators/input-converter';
import { Util } from '../../../util/util';
import { OButtonToggleComponent } from '../o-button-toggle.component';
export var DEFAULT_INPUTS_O_BUTTON_TOGGLE_GROUP = [
    'oattr: attr',
    'name',
    'enabled',
    'layout',
    'multiple',
    'value'
];
export var DEFAULT_OUTPUTS_O_BUTTON_TOGGLE_GROUP = [
    'onChange'
];
var OButtonToggleGroupComponent = (function () {
    function OButtonToggleGroupComponent(resolver) {
        this.resolver = resolver;
        this.DEFAULT_INPUTS_O_BUTTON_TOGGLE_GROUP = DEFAULT_INPUTS_O_BUTTON_TOGGLE_GROUP;
        this.DEFAULT_OUTPUTS_O_BUTTON_TOGGLE_GROUP = DEFAULT_OUTPUTS_O_BUTTON_TOGGLE_GROUP;
        this._enabled = true;
        this.layout = 'row';
        this.multiple = false;
        this.onChange = new EventEmitter();
    }
    Object.defineProperty(OButtonToggleGroupComponent.prototype, "enabled", {
        get: function () {
            if (this._innerButtonToggleGroup instanceof MatButtonToggleGroup) {
                return !this._innerButtonToggleGroup.disabled;
            }
            return true;
        },
        set: function (val) {
            if (this._innerButtonToggleGroup instanceof MatButtonToggleGroup) {
                val = Util.parseBoolean(String(val));
                this._innerButtonToggleGroup.disabled = !val;
            }
        },
        enumerable: true,
        configurable: true
    });
    OButtonToggleGroupComponent.prototype.ngOnInit = function () {
        if (!Util.isDefined(this.name)) {
            this.name = this.oattr;
        }
    };
    OButtonToggleGroupComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.buildChildren();
        this._children.changes.subscribe(function () { return _this.buildChildren(); });
    };
    OButtonToggleGroupComponent.prototype.buildChildren = function () {
        var _this = this;
        var factory = this.resolver.resolveComponentFactory(OButtonToggleComponent);
        this._viewContainerRef.clear();
        var childList = this._children.map(function (child) {
            var componentRef = _this._viewContainerRef.createComponent(factory);
            componentRef.instance.oattr = child.oattr;
            componentRef.instance.label = child.label;
            componentRef.instance.icon = child.icon;
            componentRef.instance.iconPosition = child.iconPosition;
            componentRef.instance.checked = child.checked;
            componentRef.instance.enabled = child.enabled;
            componentRef.instance.value = child.value;
            componentRef.instance.name = _this.name;
            componentRef.instance.onChange = child.onChange;
            componentRef.changeDetectorRef.detectChanges();
            return componentRef.instance;
        });
        this._innerButtonToggleGroup._buttonToggles.reset(childList.map(function (c) { return c._innerButtonToggle; }));
        this._children.reset(childList);
    };
    OButtonToggleGroupComponent.prototype.getValue = function () {
        return this._innerButtonToggleGroup ? this._innerButtonToggleGroup.value : void 0;
    };
    OButtonToggleGroupComponent.prototype.setValue = function (val) {
        this._innerButtonToggleGroup.value = val;
    };
    OButtonToggleGroupComponent.decorators = [
        { type: Component, args: [{
                    selector: 'o-button-toggle-group',
                    template: "<mat-button-toggle-group [disabled]=\"!enabled\" [name]=\"name\" [value]=\"value\" [vertical]=\"layout==='column'\" [multiple]=\"multiple\"\n  (change)=\"onChange.emit($event)\">\n  <ng-container #childContainer></ng-container>\n</mat-button-toggle-group>\n",
                    inputs: DEFAULT_INPUTS_O_BUTTON_TOGGLE_GROUP,
                    outputs: DEFAULT_OUTPUTS_O_BUTTON_TOGGLE_GROUP,
                    encapsulation: ViewEncapsulation.None,
                    host: {
                        '[class.o-button-toggle-group]': 'true'
                    },
                    entryComponents: [OButtonToggleComponent]
                }] }
    ];
    OButtonToggleGroupComponent.ctorParameters = function () { return [
        { type: ComponentFactoryResolver }
    ]; };
    OButtonToggleGroupComponent.propDecorators = {
        _innerButtonToggleGroup: [{ type: ViewChild, args: [MatButtonToggleGroup, { static: false },] }],
        _viewContainerRef: [{ type: ViewChild, args: ['childContainer', { read: ViewContainerRef, static: false },] }],
        _children: [{ type: ContentChildren, args: [forwardRef(function () { return OButtonToggleComponent; }),] }]
    };
    tslib_1.__decorate([
        InputConverter(),
        tslib_1.__metadata("design:type", Boolean)
    ], OButtonToggleGroupComponent.prototype, "multiple", void 0);
    return OButtonToggleGroupComponent;
}());
export { OButtonToggleGroupComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1idXR0b24tdG9nZ2xlLWdyb3VwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL29udGltaXplLXdlYi1uZ3gvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9idXR0b24tdG9nZ2xlL28tYnV0dG9uLXRvZ2dsZS1ncm91cC9vLWJ1dHRvbi10b2dnbGUtZ3JvdXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBRUwsU0FBUyxFQUVULHdCQUF3QixFQUN4QixlQUFlLEVBQ2YsWUFBWSxFQUNaLFVBQVUsRUFFVixTQUFTLEVBQ1QsU0FBUyxFQUNULGdCQUFnQixFQUNoQixpQkFBaUIsRUFDbEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF5QixvQkFBb0IsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWhGLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUNyRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDMUMsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFdEUsTUFBTSxDQUFDLElBQU0sb0NBQW9DLEdBQUc7SUFDbEQsYUFBYTtJQUNiLE1BQU07SUFDTixTQUFTO0lBQ1QsUUFBUTtJQUNSLFVBQVU7SUFDVixPQUFPO0NBQ1IsQ0FBQztBQUVGLE1BQU0sQ0FBQyxJQUFNLHFDQUFxQyxHQUFHO0lBQ25ELFVBQVU7Q0FDWCxDQUFDO0FBRUY7SUFpREUscUNBQXNCLFFBQWtDO1FBQWxDLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBcENqRCx5Q0FBb0MsR0FBRyxvQ0FBb0MsQ0FBQztRQUM1RSwwQ0FBcUMsR0FBRyxxQ0FBcUMsQ0FBQztRQWlCM0UsYUFBUSxHQUFZLElBQUksQ0FBQztRQUM1QixXQUFNLEdBQXFCLEtBQUssQ0FBQztRQUVqQyxhQUFRLEdBQVksS0FBSyxDQUFDO1FBSzFCLGFBQVEsR0FBd0MsSUFBSSxZQUFZ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Q0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRixDQUFDO0lBRUQsOENBQVEsR0FBUixVQUFTLEdBQVE7UUFDZixJQUFJLENBQUMsdUJBQXVCLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztJQUMzQyxDQUFDOztnQkF6RkYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSx1QkFBdUI7b0JBQ2pDLDZRQUFxRDtvQkFDckQsTUFBTSxFQUFFLG9DQUFvQztvQkFDNUMsT0FBTyxFQUFFLHFDQUFxQztvQkFDOUMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7b0JBQ3JDLElBQUksRUFBRTt3QkFDSiwrQkFBK0IsRUFBRSxNQUFNO3FCQUN4QztvQkFDRCxlQUFlLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztpQkFDMUM7OztnQkF2Q0Msd0JBQXdCOzs7MENBdUV2QixTQUFTLFNBQUMsb0JBQW9CLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO29DQUVqRCxTQUFTLFNBQUMsZ0JBQWdCLEVBQUUsRUFBRSxJQUFJLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs0QkFFckUsZUFBZSxTQUFDLFVBQVUsQ0FBQyxjQUFNLE9BQUEsc0JBQXNCLEVBQXRCLENBQXNCLENBQUM7O0lBWnpEO1FBREMsY0FBYyxFQUFFOztpRUFDZ0I7SUF5RG5DLGtDQUFDO0NBQUEsQUEzRkQsSUEyRkM7U0FoRlksMkJBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgQ29tcG9uZW50LFxuICBDb21wb25lbnRGYWN0b3J5LFxuICBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsXG4gIENvbnRlbnRDaGlsZHJlbixcbiAgRXZlbnRFbWl0dGVyLFxuICBmb3J3YXJkUmVmLFxuICBPbkluaXQsXG4gIFF1ZXJ5TGlzdCxcbiAgVmlld0NoaWxkLFxuICBWaWV3Q29udGFpbmVyUmVmLFxuICBWaWV3RW5jYXBzdWxhdGlvblxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdEJ1dHRvblRvZ2dsZUNoYW5nZSwgTWF0QnV0dG9uVG9nZ2xlR3JvdXAgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5cbmltcG9ydCB7IElucHV0Q29udmVydGVyIH0gZnJvbSAnLi4vLi4vLi4vZGVjb3JhdG9ycy9pbnB1dC1jb252ZXJ0ZXInO1xuaW1wb3J0IHsgVXRpbCB9IGZyb20gJy4uLy4uLy4uL3V0aWwvdXRpbCc7XG5pbXBvcnQgeyBPQnV0dG9uVG9nZ2xlQ29tcG9uZW50IH0gZnJvbSAnLi4vby1idXR0b24tdG9nZ2xlLmNvbXBvbmVudCc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0lOUFVUU19PX0JVVFRPTl9UT0dHTEVfR1JPVVAgPSBbXG4gICdvYXR0cjogYXR0cicsXG4gICduYW1lJyxcbiAgJ2VuYWJsZWQnLFxuICAnbGF5b3V0JyxcbiAgJ211bHRpcGxlJyxcbiAgJ3ZhbHVlJ1xuXTtcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1VUUFVUU19PX0JVVFRPTl9UT0dHTEVfR1JPVVAgPSBbXG4gICdvbkNoYW5nZSdcbl07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ28tYnV0dG9uLXRvZ2dsZS1ncm91cCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9vLWJ1dHRvbi10b2dnbGUtZ3JvdXAuY29tcG9uZW50Lmh0bWwnLFxuICBpbnB1dHM6IERFRkFVTFRfSU5QVVRTX09fQlVUVE9OX1RPR0dMRV9HUk9VUCxcbiAgb3V0cHV0czogREVGQVVMVF9PVVRQVVRTX09fQlVUVE9OX1RPR0dMRV9HUk9VUCxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3Muby1idXR0b24tdG9nZ2xlLWdyb3VwXSc6ICd0cnVlJ1xuICB9LFxuICBlbnRyeUNvbXBvbmVudHM6IFtPQnV0dG9uVG9nZ2xlQ29tcG9uZW50XVxufSlcbmV4cG9ydCBjbGFzcyBPQnV0dG9uVG9nZ2xlR3JvdXBDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkluaXQge1xuXG4gIHB1YmxpYyBERUZBVUxUX0lOUFVUU19PX0JVVFRPTl9UT0dHTEVfR1JPVVAgPSBERUZBVUxUX0lOUFVUU19PX0JVVFRPTl9UT0dHTEVfR1JPVVA7XG4gIHB1YmxpYyBERUZBVUxUX09VVFBVVFNfT19CVVRUT05fVE9HR0xFX0dST1VQID0gREVGQVVMVF9PVVRQVVRTX09fQlVUVE9OX1RPR0dMRV9HUk9VUDtcblxuICAvKiBJbnB1dHMgKi9cbiAgcHJvdGVjdGVkIG9hdHRyOiBzdHJpbmc7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIGdldCBlbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9pbm5lckJ1dHRvblRvZ2dsZUdyb3VwIGluc3RhbmNlb2YgTWF0QnV0dG9uVG9nZ2xlR3JvdXApIHtcbiAgICAgIHJldHVybiAhdGhpcy5faW5uZXJCdXR0b25Ub2dnbGVHcm91cC5kaXNhYmxlZDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgc2V0IGVuYWJsZWQodmFsOiBib29sZWFuKSB7XG4gICAgaWYgKHRoaXMuX2lubmVyQnV0dG9uVG9nZ2xlR3JvdXAgaW5zdGFuY2VvZiBNYXRCdXR0b25Ub2dnbGVHcm91cCkge1xuICAgICAgdmFsID0gVXRpbC5wYXJzZUJvb2xlYW4oU3RyaW5nKHZhbCkpO1xuICAgICAgdGhpcy5faW5uZXJCdXR0b25Ub2dnbGVHcm91cC5kaXNhYmxlZCA9ICF2YWw7XG4gICAgfVxuICB9XG4gIHByb3RlY3RlZCBfZW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBsYXlvdXQ6ICdyb3cnIHwgJ2NvbHVtbicgPSAncm93JztcbiAgQElucHV0Q29udmVydGVyKClcbiAgcHVibGljIG11bHRpcGxlOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyB2YWx1ZTogYW55O1xuICAvKiBFbmQgaW5wdXRzICovXG5cbiAgLyogT3V0cHV0cyAqL1xuICBwdWJsaWMgb25DaGFuZ2U6IEV2ZW50RW1pdHRlcjxNYXRCdXR0b25Ub2dnbGVDaGFuZ2U+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvKiBFbmQgb3V0cHV0cyAqL1xuXG4gIEBWaWV3Q2hpbGQoTWF0QnV0dG9uVG9nZ2xlR3JvdXAsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBwcm90ZWN0ZWQgX2lubmVyQnV0dG9uVG9nZ2xlR3JvdXA6IE1hdEJ1dHRvblRvZ2dsZUdyb3VwO1xuICBAVmlld0NoaWxkKCdjaGlsZENvbnRhaW5lcicsIHsgcmVhZDogVmlld0NvbnRhaW5lclJlZiwgc3RhdGljOiBmYWxzZSB9KVxuICBwcm90ZWN0ZWQgX3ZpZXdDb250YWluZXJSZWY6IFZpZXdDb250YWluZXJSZWY7XG4gIEBDb250ZW50Q2hpbGRyZW4oZm9yd2FyZFJlZigoKSA9PiBPQnV0dG9uVG9nZ2xlQ29tcG9uZW50KSlcbiAgcHJvdGVjdGVkIF9jaGlsZHJlbjogUXVlcnlMaXN0PE9CdXR0b25Ub2dnbGVDb21wb25lbnQ+O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByZXNvbHZlcjogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKSB7IH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoIVV0aWwuaXNEZWZpbmVkKHRoaXMubmFtZSkpIHtcbiAgICAgIHRoaXMubmFtZSA9IHRoaXMub2F0dHI7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIHRoaXMuYnVpbGRDaGlsZHJlbigpO1xuICAgIHRoaXMuX2NoaWxkcmVuLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMuYnVpbGRDaGlsZHJlbigpKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBidWlsZENoaWxkcmVuKCk6IHZvaWQge1xuICAgIGNvbnN0IGZhY3Rvcnk6IENvbXBvbmVudEZhY3Rvcnk8T0J1dHRvblRvZ2dsZUNvbXBvbmVudD4gPSB0aGlzLnJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KE9CdXR0b25Ub2dnbGVDb21wb25lbnQpO1xuICAgIHRoaXMuX3ZpZXdDb250YWluZXJSZWYuY2xlYXIoKTtcbiAgICBjb25zdCBjaGlsZExpc3QgPSB0aGlzLl9jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnRSZWYgPSB0aGlzLl92aWV3Q29udGFpbmVyUmVmLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5KTtcbiAgICAgIGNvbXBvbmVudFJlZi5pbnN0YW5jZS5vYXR0ciA9IGNoaWxkLm9hdHRyO1xuICAgICAgY29tcG9uZW50UmVmLmluc3RhbmNlLmxhYmVsID0gY2hpbGQubGFiZWw7XG4gICAgICBjb21wb25lbnRSZWYuaW5zdGFuY2UuaWNvbiA9IGNoaWxkLmljb247XG4gICAgICBjb21wb25lbnRSZWYuaW5zdGFuY2UuaWNvblBvc2l0aW9uID0gY2hpbGQuaWNvblBvc2l0aW9uO1xuICAgICAgY29tcG9uZW50UmVmLmluc3RhbmNlLmNoZWNrZWQgPSBjaGlsZC5jaGVja2VkO1xuICAgICAgY29tcG9uZW50UmVmLmluc3RhbmNlLmVuYWJsZWQgPSBjaGlsZC5lbmFibGVkO1xuICAgICAgY29tcG9uZW50UmVmLmluc3RhbmNlLnZhbHVlID0gY2hpbGQudmFsdWU7XG4gICAgICBjb21wb25lbnRSZWYuaW5zdGFuY2UubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgIGNvbXBvbmVudFJlZi5pbnN0YW5jZS5vbkNoYW5nZSA9IGNoaWxkLm9uQ2hhbmdlO1xuICAgICAgY29tcG9uZW50UmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgIHJldHVybiBjb21wb25lbnRSZWYuaW5zdGFuY2U7XG4gICAgfSk7XG4gICAgdGhpcy5faW5uZXJCdXR0b25Ub2dnbGVHcm91cC5fYnV0dG9uVG9nZ2xlcy5yZXNldChjaGlsZExpc3QubWFwKGMgPT4gYy5faW5uZXJCdXR0b25Ub2dnbGUpKTtcbiAgICB0aGlzLl9jaGlsZHJlbi5yZXNldChjaGlsZExpc3QpO1xuICB9XG5cbiAgZ2V0VmFsdWUoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5faW5uZXJCdXR0b25Ub2dnbGVHcm91cCA/IHRoaXMuX2lubmVyQnV0dG9uVG9nZ2xlR3JvdXAudmFsdWUgOiB2b2lkIDA7XG4gIH1cblxuICBzZXRWYWx1ZSh2YWw6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuX2lubmVyQnV0dG9uVG9nZ2xlR3JvdXAudmFsdWUgPSB2YWw7XG4gIH1cblxufVxuIl19