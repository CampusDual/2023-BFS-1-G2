/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/report/o-report-detail/o-report-detail.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewChild } from '@angular/core';
import { MatDialog } from '@angular/material';
import { DialogService, OFormComponent, OTextInputComponent } from 'ontimize-web-ngx';
import { Constants } from '../../../util/constants';
import { OReportViewerComponent } from '../o-report-viewer/o-report-viewer.component';
export class OReportDetailComponent {
    /**
     * @param {?} dialogService
     * @param {?} dialog
     */
    constructor(dialogService, dialog) {
        this.dialogService = dialogService;
        this.dialog = dialog;
        this.hasParams = false;
    }
    /**
     * @private
     * @return {?}
     */
    getValues() {
        for (let i = 0; i < this.parameters.length; i++) {
            /** @type {?} */
            let v = this.paramForm.getFieldValue('value' + i);
            this.values.push(v);
        }
    }
    /**
     * @return {?}
     */
    fillReport() {
        this.values = [];
        this.av = [this.id.getValue()];
        if (this.parameters.length > 0) {
            this.getValues();
            /** @type {?} */
            let size = this.values.length;
            for (let i = 0; i < size; i++)
                this.av.push(this.values.shift());
        }
        this.dialog.open(OReportViewerComponent, {
            height: Constants.DEFAULT_HEIGHT_DIALOG,
            width: Constants.DEFAULT_HEIGHT_DIALOG,
            data: {
                'params': this.av,
                'filter': {}
            }
        });
    }
    /**
     * @param {?} e
     * @return {?}
     */
    onDataLoaded(e) {
        this.parameters = e['PARAMETERS'];
        if (this.parameters.length > 0) {
            this.hasParams = true;
        }
    }
}
OReportDetailComponent.decorators = [
    { type: Component, args: [{
                selector: 'o-report-detail',
                template: "<o-form #form attr=\"report\" service-type=\"report\" entity=\"getReport\" keys=\"UUID\" header-actions=\"R;I;U;D\" show-header=\"yes\"\n  show-header-navigation=\"yes\" fxLayout=\"column\" (onDataLoaded)=\"onDataLoaded($event)\">\n  <o-column attr=\"row1\" title=\"REPORT_DATA\" icon=\"description\" layout-gap=\"14px\" fxFill>\n    <o-text-input #id attr=\"UUID\" label=\"REPORT_ID\" enabled=\"no\" fxFlex=\"100\"></o-text-input>\n    <div fxLayout=\"row wrap\" fxLayoutGap=\"14px\" fxLayoutAlign=\"start start\" fxFlex>\n      <o-text-input attr=\"NAME\" label=\"REPORT_NAME\" required=\"yes\" fxFlex=\"50\"></o-text-input>\n      <o-text-input attr=\"REPORT_TYPE\" label=\"REPORT_TYPE\" required=\"yes\" fxFlex></o-text-input>\n    </div>\n    <o-text-input class=\"form-field\" attr=\"MAIN_REPORT_FILENAME\" label=\"REPORT_FILENAME\" required=\"yes\" fxFlex></o-text-input>\n    <o-textarea-input class=\"form-field\" attr=\"DESCRIPTION\" label=\"REPORT_DESCRIPTION\" required=\"yes\" fxFlex></o-textarea-input>\n  </o-column>\n\n  <div *ngIf=\"hasParams\">\n    <o-column #params title=\"PARAMETERS\" icon=\"info\" class=\"vertical-margin-10\" layout-align=\"start stretch\" appearance=\"outline\">\n      <o-form #paramForm attr=\"report\" service-type=\"report\" entity=\"fillReport\" keys=\"id\" header-mode=\"none\" show-header=\"no\"\n        layout-direction=\"column\">\n        <ng-container *ngFor=\"let elem of parameters; let i = index\">\n          <o-row fxFlex>\n            <ng-template [ngIf]=\"elem.valueClass == 'java.sql.Date' || elem.valueClass == 'java.sql.Timestamp'\" [ngIfElse]=\"textInput\">\n              <o-date-input [attr]=\"'value' + i\" [label]=\"elem.name\" required=\"yes\" value-type=\"string\" format=\"YYYY-MM-DD\" fxFlex></o-date-input>\n            </ng-template>\n            <ng-template #textInput>\n              <o-text-input [attr]=\"'value' + i\" [label]=\"elem.description\" required=\"yes\" fxFlex></o-text-input>\n            </ng-template>\n          </o-row>\n        </ng-container>\n      </o-form>\n    </o-column>\n  </div>\n  <o-button type=\"RAISED\" (click)=\"fillReport()\" label=\"{{ 'FILL_REPORT' | oTranslate }}\" icon=\"download\" layout-padding color=\"accent\"\n    [enabled]=\"form.formGroup?.valid && paramForm?.formGroup?.valid\"></o-button>\n</o-form>\n"
            }] }
];
/** @nocollapse */
OReportDetailComponent.ctorParameters = () => [
    { type: DialogService },
    { type: MatDialog }
];
OReportDetailComponent.propDecorators = {
    id: [{ type: ViewChild, args: ['id', { static: true },] }],
    paramForm: [{ type: ViewChild, args: ['paramForm', { static: false },] }]
};
if (false) {
    /** @type {?} */
    OReportDetailComponent.prototype.id;
    /** @type {?} */
    OReportDetailComponent.prototype.paramForm;
    /**
     * @type {?}
     * @private
     */
    OReportDetailComponent.prototype.values;
    /** @type {?} */
    OReportDetailComponent.prototype.parameters;
    /**
     * @type {?}
     * @private
     */
    OReportDetailComponent.prototype.av;
    /** @type {?} */
    OReportDetailComponent.prototype.hasParams;
    /**
     * @type {?}
     * @protected
     */
    OReportDetailComponent.prototype.dialogService;
    /**
     * @type {?}
     * @protected
     */
    OReportDetailComponent.prototype.dialog;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby1yZXBvcnQtZGV0YWlsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL29udGltaXplLXdlYi1uZ3gtcmVwb3J0LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcmVwb3J0L28tcmVwb3J0LWRldGFpbC9vLXJlcG9ydC1kZXRhaWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckQsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxhQUFhLEVBQUUsY0FBYyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDdEYsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBQ3BELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDhDQUE4QyxDQUFDO0FBTXRGLE1BQU0sT0FBTyxzQkFBc0I7Ozs7O0lBYWpDLFlBQ1ksYUFBNEIsRUFDNUIsTUFBaUI7UUFEakIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFDNUIsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUp0QixjQUFTLEdBQVksS0FBSyxDQUFDO0lBSzlCLENBQUM7Ozs7O0lBR0csU0FBUztRQUNmLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTs7Z0JBQzNDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQzs7OztJQUVNLFVBQVU7UUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNqQixJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFBO1FBQzlCLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQzlCLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7Z0JBQ2IsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTTtZQUM3QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1NBQ3JDO1FBR0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUU7WUFDdkMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxxQkFBcUI7WUFDdkMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxxQkFBcUI7WUFDdEMsSUFBSSxFQUFFO2dCQUNKLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRTtnQkFDakIsUUFBUSxFQUFFLEVBQUU7YUFDYjtTQUVGLENBQUMsQ0FBQztJQUNMLENBQUM7Ozs7O0lBRUQsWUFBWSxDQUFDLENBQVM7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDbEMsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7U0FDdkI7SUFDSCxDQUFDOzs7WUF6REYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxpQkFBaUI7Z0JBQzNCLG95RUFBK0M7YUFDaEQ7Ozs7WUFQUSxhQUFhO1lBRGIsU0FBUzs7O2lCQVdmLFNBQVMsU0FBQyxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO3dCQUVoQyxTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs7OztJQUZ6QyxvQ0FDd0I7O0lBQ3hCLDJDQUMwQjs7Ozs7SUFFMUIsd0NBQXlCOztJQUV6Qiw0Q0FBc0I7Ozs7O0lBQ3RCLG9DQUFxQjs7SUFDckIsMkNBQWtDOzs7OztJQUdoQywrQ0FBc0M7Ozs7O0lBQ3RDLHdDQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBEaWFsb2dTZXJ2aWNlLCBPRm9ybUNvbXBvbmVudCwgT1RleHRJbnB1dENvbXBvbmVudCB9IGZyb20gJ29udGltaXplLXdlYi1uZ3gnO1xuaW1wb3J0IHsgQ29uc3RhbnRzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbC9jb25zdGFudHMnO1xuaW1wb3J0IHsgT1JlcG9ydFZpZXdlckNvbXBvbmVudCB9IGZyb20gJy4uL28tcmVwb3J0LXZpZXdlci9vLXJlcG9ydC12aWV3ZXIuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnby1yZXBvcnQtZGV0YWlsJyxcbiAgdGVtcGxhdGVVcmw6ICcuL28tcmVwb3J0LWRldGFpbC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgT1JlcG9ydERldGFpbENvbXBvbmVudCB7XG5cbiAgQFZpZXdDaGlsZCgnaWQnLCB7IHN0YXRpYzogdHJ1ZSB9KVxuICBpZDogT1RleHRJbnB1dENvbXBvbmVudDtcbiAgQFZpZXdDaGlsZCgncGFyYW1Gb3JtJywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIHBhcmFtRm9ybTogT0Zvcm1Db21wb25lbnQ7XG5cbiAgcHJpdmF0ZSB2YWx1ZXM6IHN0cmluZ1tdO1xuXG4gIHB1YmxpYyBwYXJhbWV0ZXJzOiBbXTtcbiAgcHJpdmF0ZSBhdjogc3RyaW5nW107XG4gIHB1YmxpYyBoYXNQYXJhbXM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgZGlhbG9nU2VydmljZTogRGlhbG9nU2VydmljZSxcbiAgICBwcm90ZWN0ZWQgZGlhbG9nOiBNYXREaWFsb2csXG4gICkgeyB9XG5cblxuICBwcml2YXRlIGdldFZhbHVlcygpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHYgPSB0aGlzLnBhcmFtRm9ybS5nZXRGaWVsZFZhbHVlKCd2YWx1ZScgKyBpKTtcbiAgICAgIHRoaXMudmFsdWVzLnB1c2godik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGZpbGxSZXBvcnQoKSB7XG4gICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB0aGlzLmF2ID0gW3RoaXMuaWQuZ2V0VmFsdWUoKV1cbiAgICBpZiAodGhpcy5wYXJhbWV0ZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuZ2V0VmFsdWVzKCk7XG4gICAgICBsZXQgc2l6ZSA9IHRoaXMudmFsdWVzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKVxuICAgICAgICB0aGlzLmF2LnB1c2godGhpcy52YWx1ZXMuc2hpZnQoKSk7XG4gICAgfVxuXG5cbiAgICB0aGlzLmRpYWxvZy5vcGVuKE9SZXBvcnRWaWV3ZXJDb21wb25lbnQsIHtcbiAgICAgIGhlaWdodDogQ29uc3RhbnRzLkRFRkFVTFRfSEVJR0hUX0RJQUxPRyxcbiAgICAgIHdpZHRoOiBDb25zdGFudHMuREVGQVVMVF9IRUlHSFRfRElBTE9HLFxuICAgICAgZGF0YToge1xuICAgICAgICAncGFyYW1zJzogdGhpcy5hdixcbiAgICAgICAgJ2ZpbHRlcic6IHt9XG4gICAgICB9XG5cbiAgICB9KTtcbiAgfVxuXG4gIG9uRGF0YUxvYWRlZChlOiBvYmplY3QpIHtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBlWydQQVJBTUVURVJTJ107XG4gICAgaWYgKHRoaXMucGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmhhc1BhcmFtcyA9IHRydWU7XG4gICAgfVxuICB9XG5cbn1cbiJdfQ==