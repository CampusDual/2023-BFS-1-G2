/**
 * @fileoverview added by tsickle
 * Generated from: lib/components/report-on-demand/report-on-demand/report-on-demand.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { moveItemInArray } from '@angular/cdk/drag-drop';
import { Injector, ViewChild, ViewEncapsulation } from '@angular/core';
import { Component, Inject } from '@angular/core';
import { MatSelectionList } from '@angular/material';
import { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { AppConfig, DialogService, OTableComponent, OTranslateService, SnackBarService, Util } from 'ontimize-web-ngx';
import { OReportService } from '../../../services/o-report.service';
import { DefaultOReportPreferences } from '../../../types/report-preferences.type';
import { Utils } from '../../../util/utils';
import { ApplyConfigurationDialogComponent } from '../apply-configuration/apply-configuration-dialog.component';
import { SavePreferencesDialogComponent } from '../save-preferences-dialog/save-preferences-dialog.component';
import { SelectFunctionDialogComponent } from '../select-function-dialog/select-function-dialog.component';
import { StyleDialogComponent } from '../style-dialog/style-dialog.component';
var ReportOnDemandComponent = /** @class */ (function () {
    function ReportOnDemandComponent(injector, dialogRef, data) {
        this.injector = injector;
        this.dialogRef = dialogRef;
        this.data = data;
        this.orientations = [{ text: "vertical", value: true }, { text: "horizontal", value: false }];
        this.functionsData = [];
        this.initialFunctionsData = [];
        this.appliedConfiguration = false;
        this.selectedFunctions = [];
        this.stylesArray = [
            { value: 'grid', viewValue: 'GRID' },
            { value: 'rowNumber', viewValue: 'ROW_NUMBER' },
            { value: 'columnName', viewValue: 'COLUMNS_NAMES' },
            { value: 'backgroundOnOddRows', viewValue: 'BACKGROUND_ODD_ROWS' },
            { value: 'hideGroupDetails', viewValue: 'GROUP_DETAILS' },
            { value: 'groupNewPage', viewValue: 'GROUP_PAGE' },
            { value: 'firstGroupNewPage', viewValue: 'FIRST_GROUP_PAGE' }
        ];
        this.columnsOrderBy = [];
        this.openedSidenav = true;
        this.fullscreen = false;
        this.blankPdf = 'JVBERi0xLjYKJcOkw7zDtsOfCjIgMCBvYmoKPDwvTGVuZ3RoIDMgMCBSL0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nDPQM1Qo5ypUMFAw0DMwslAwtTTVMzI3VbAwMdSzMDNUKErlCtdSyOMKVAAAtxIIrgplbmRzdHJlYW0KZW5kb2JqCgozIDAgb2JqCjUwCmVuZG9iagoKNSAwIG9iago8PAo+PgplbmRvYmoKCjYgMCBvYmoKPDwvRm9udCA1IDAgUgovUHJvY1NldFsvUERGL1RleHRdCj4+CmVuZG9iagoKMSAwIG9iago8PC9UeXBlL1BhZ2UvUGFyZW50IDQgMCBSL1Jlc291cmNlcyA2IDAgUi9NZWRpYUJveFswIDAgNTk1LjMwMzkzNzAwNzg3NCA4NDEuODg5NzYzNzc5NTI4XS9Hcm91cDw8L1MvVHJhbnNwYXJlbmN5L0NTL0RldmljZVJHQi9JIHRydWU+Pi9Db250ZW50cyAyIDAgUj4+CmVuZG9iagoKNCAwIG9iago8PC9UeXBlL1BhZ2VzCi9SZXNvdXJjZXMgNiAwIFIKL01lZGlhQm94WyAwIDAgNTk1IDg0MSBdCi9LaWRzWyAxIDAgUiBdCi9Db3VudCAxPj4KZW5kb2JqCgo3IDAgb2JqCjw8L1R5cGUvQ2F0YWxvZy9QYWdlcyA0IDAgUgovT3BlbkFjdGlvblsxIDAgUiAvWFlaIG51bGwgbnVsbCAwXQovTGFuZyhlcy1FUykKPj4KZW5kb2JqCgo4IDAgb2JqCjw8L0F1dGhvcjxGRUZGMDA1MDAwNjEwMDc0MDA3MjAwNjkwMDYzMDA2OTAwNjEwMDIwMDA0RDAwNjEwMDcyMDA3NDAwRUQwMDZFMDA2NTAwN0EwMDIwMDA1NDAwNjkwMDZDMDA3NjAwNjU+Ci9DcmVhdG9yPEZFRkYwMDU3MDA3MjAwNjkwMDc0MDA2NTAwNzI+Ci9Qcm9kdWNlcjxGRUZGMDA0QzAwNjkwMDYyMDA3MjAwNjUwMDRGMDA2NjAwNjYwMDY5MDA2MzAwNjUwMDIwMDAzNzAwMkUwMDMxPgovQ3JlYXRpb25EYXRlKEQ6MjAyMjA1MTAxNDUyMDYrMDInMDAnKT4+CmVuZG9iagoKeHJlZgowIDkKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMjM0IDAwMDAwIG4gCjAwMDAwMDAwMTkgMDAwMDAgbiAKMDAwMDAwMDE0MCAwMDAwMCBuIAowMDAwMDAwNDAyIDAwMDAwIG4gCjAwMDAwMDAxNTkgMDAwMDAgbiAKMDAwMDAwMDE4MSAwMDAwMCBuIAowMDAwMDAwNTAwIDAwMDAwIG4gCjAwMDAwMDA1OTYgMDAwMDAgbiAKdHJhaWxlcgo8PC9TaXplIDkvUm9vdCA3IDAgUgovSW5mbyA4IDAgUgovSUQgWyA8RDdBODhCRTRFREFDRkU1RDFGMTIwMzNFMDUyN0JERkU+CjxEN0E4OEJFNEVEQUNGRTVEMUYxMjAzM0UwNTI3QkRGRT4gXQovRG9jQ2hlY2tzdW0gLzgwNTA5NDU4QjgyN0RCRDQ2QzlEODdBMjY4NjdCNEFDCj4+CnN0YXJ0eHJlZgo4NzYKJSVFT0YK';
        this.appConfig = this.injector.get(AppConfig);
        this.translateService = this.injector.get(OTranslateService);
        this.snackBarService = this.injector.get(SnackBarService);
        this.reportService = this.injector.get(OReportService);
        this.dialogService = this.injector.get(DialogService);
        this.dialog = this.injector.get(MatDialog);
    }
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.initialize();
    };
    /**
     * @protected
     * @return {?}
     */
    ReportOnDemandComponent.prototype.initialize = /**
     * @protected
     * @return {?}
     */
    function () {
        this.table = this.data;
        this.language = this.translateService.getCurrentLang();
        this.service = this.table.service;
        this.columnsArray = this.parseColumnsVisible();
        this.initialColumnsData = this.parseReportColumn(this.columnsArray);
        this.initialColumnsToGroupData = this.columnsArray;
        this.currentConfiguration = { ENTITY: this.table.entity };
        this.initializeReportPreferences();
        this.getFunctions();
    };
    /**
     * @param {?=} serviceName
     * @return {?}
     */
    ReportOnDemandComponent.prototype.getDefaultServiceConfiguration = /**
     * @param {?=} serviceName
     * @return {?}
     */
    function (serviceName) {
        /** @type {?} */
        var configuration = this.appConfig.getServiceConfiguration();
        /** @type {?} */
        var servConfig = {};
        if (serviceName && configuration.hasOwnProperty(serviceName)) {
            servConfig = configuration[serviceName];
        }
        return servConfig;
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.previewReport = /**
     * @return {?}
     */
    function () {
        this.openReport();
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.clearCurrentPreferences = /**
     * @return {?}
     */
    function () {
        this.initializeReportPreferences();
        if (this.columnsList) {
            this.columnsList.deselectAll();
        }
        if (this.functionsList) {
            this.functionsList.deselectAll();
        }
        if (this.orderByList) {
            this.orderByList.deselectAll();
        }
    };
    /**
     * @protected
     * @return {?}
     */
    ReportOnDemandComponent.prototype.initializeReportPreferences = /**
     * @protected
     * @return {?}
     */
    function () {
        /* initialize columnsData and functionsData because they are modified by
        changing settings */
        this.columnsData = Utils.cloneObject(this.initialColumnsData);
        this.functionsData = Utils.cloneObject(this.initialFunctionsData);
        this.columnsToGroupData = Utils.cloneObject(this.initialColumnsToGroupData);
        this.columnsOrderBy = [];
        this.pdf = this.blankPdf;
        this.currentPreference = new DefaultOReportPreferences();
        this.currentPreference.entity = this.table.entity;
        this.currentPreference.service = this.table.service;
    };
    /**
     * @protected
     * @return {?}
     */
    ReportOnDemandComponent.prototype.parseColumnsVisible = /**
     * @protected
     * @return {?}
     */
    function () {
        /** @type {?} */
        var columnsArray = Util.parseArray(this.table.columns);
        return this.table.oTableOptions.columns.filter((/**
         * @param {?} oCol
         * @return {?}
         */
        function (oCol) { return oCol.type !== "image" && oCol.visible && columnsArray.findIndex((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return column === oCol.attr; })) > -1; })).map((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.attr; }));
    };
    /**
     * @protected
     * @param {?} columns
     * @return {?}
     */
    ReportOnDemandComponent.prototype.parseReportColumn = /**
     * @protected
     * @param {?} columns
     * @return {?}
     */
    function (columns) {
        var _this = this;
        return columns.map((/**
         * @param {?} column
         * @return {?}
         */
        function (column) {
            /** @type {?} */
            var reportColumn = {
                id: column, name: _this.translateService.get(column)
            };
            /** @type {?} */
            var columnStyle = _this.parseColumnStyle(column);
            if (Util.isObject(columnStyle) && Object.keys(columnStyle).length > 0) {
                reportColumn.columnStyle = columnStyle;
            }
            return reportColumn;
        }));
    };
    /**
     * @protected
     * @param {?} column
     * @return {?}
     */
    ReportOnDemandComponent.prototype.parseColumnStyle = /**
     * @protected
     * @param {?} column
     * @return {?}
     */
    function (column) {
        /** @type {?} */
        var columnStyle = {};
        /** @type {?} */
        var renderer = this.createRenderer(column);
        if (Util.isDefined(renderer) && Util.isDefined(renderer.type)) {
            columnStyle.renderer = renderer;
        }
        return columnStyle;
    };
    /**
     * @protected
     * @param {?} columnsOrderBy
     * @return {?}
     */
    ReportOnDemandComponent.prototype.parseColumnsOrderBy = /**
     * @protected
     * @param {?} columnsOrderBy
     * @return {?}
     */
    function (columnsOrderBy) {
        return columnsOrderBy.map((/**
         * @param {?} column
         * @return {?}
         */
        function (column) {
            return { columnId: column.columnId, columnName: column.name, ascendent: column.ascendent };
        }));
    };
    /**
     * @protected
     * @return {?}
     */
    ReportOnDemandComponent.prototype.openReport = /**
     * @protected
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var serviceConfiguration = this.getDefaultServiceConfiguration(this.currentPreference.service);
        /** @type {?} */
        var pathService;
        if (Util.isObject(serviceConfiguration) && serviceConfiguration.hasOwnProperty('path')) {
            pathService = serviceConfiguration.path;
        }
        this.reportService.createReport({
            "title": this.currentPreference.title, "groups": this.currentPreference.groups, "entity": this.currentPreference.entity, "path": pathService,
            "service": this.currentPreference.service, "vertical": this.currentPreference.vertical, "functions": this.currentPreference.functions,
            "style": this.currentPreference.style, "subtitle": this.currentPreference.subtitle, "columns": this.currentPreference.columns, "orderBy": this.currentPreference.orderBy,
            "language": this.language
        }).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res && res.data.length && res.code === 0) {
                _this.pdf = res.data[0].file;
            }
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.getFunctions = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.reportService.getFunctions({
            "columns": this.columnsArray, "entity": this.currentPreference.entity,
            "service": this.currentPreference.service, "language": this.language
        }).subscribe((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            if (res && res.data.length && res.code === 0) {
                _this.functionsData = _this.parseDefaultFunctionsData(res.data[0].functions);
                _this.initialFunctionsData = Utils.cloneObject(_this.functionsData);
            }
        }));
    };
    /**
     * @param {?} listColumns
     * @return {?}
     */
    ReportOnDemandComponent.prototype.parseDefaultFunctionsData = /**
     * @param {?} listColumns
     * @return {?}
     */
    function (listColumns) {
        var _this = this;
        return listColumns.filter((/**
         * @param {?} column
         * @return {?}
         */
        function (column) {
            return _this.columnsData.
                findIndex((/**
             * @param {?} columnData
             * @return {?}
             */
            function (columnData) {
                return columnData.columnStyle && columnData.columnStyle.renderer && columnData.columnStyle.renderer.type === 'service' && columnData.id === column.columnName;
            })) === -1;
        }));
    };
    /**
     * Checks preference data is consistent with the table data
     */
    /**
     * Checks preference data is consistent with the table data
     * @private
     * @return {?}
     */
    ReportOnDemandComponent.prototype.checkPreferenceData = /**
     * Checks preference data is consistent with the table data
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.currentPreference.columns = this.currentPreference.columns.filter((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return _this.initialColumnsData.findIndex((/**
         * @param {?} columnData
         * @return {?}
         */
        function (columnData) { return columnData.id === column.id; })) > -1; }));
        this.currentPreference.groups = this.currentPreference.groups.filter((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return _this.initialColumnsToGroupData.findIndex((/**
         * @param {?} columnData
         * @return {?}
         */
        function (columnData) { return columnData === column; })) > -1; }));
        this.currentPreference.functions = this.currentPreference.functions.filter((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return _this.initialFunctionsData.findIndex((/**
         * @param {?} columnData
         * @return {?}
         */
        function (columnData) { return columnData.columnName === column.columnName; })) > -1; }));
        this.currentPreference.orderBy = this.currentPreference.orderBy.filter((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return _this.columnsOrderBy.findIndex((/**
         * @param {?} columnData
         * @return {?}
         */
        function (columnData) { return columnData.columnId === column.columnId; })) > -1; }));
    };
    /**
     * @param {?} configuration
     * @return {?}
     */
    ReportOnDemandComponent.prototype.applyConfiguration = /**
     * @param {?} configuration
     * @return {?}
     */
    function (configuration) {
        var _this = this;
        this.clearCurrentPreferences();
        this.currentConfiguration = configuration;
        this.currentPreference = JSON.parse(this.currentConfiguration.PREFERENCES);
        this.currentPreference.columns.forEach((/**
         * @param {?} column
         * @return {?}
         */
        function (column) { return _this.updateColumnsOrderByData(column.id); }));
        this.checkPreferenceData();
        // Set the functionsData with the data that is loaded from the configuration because it changes
        this.functionsData = this.functionsData.map((/**
         * @param {?} functionData
         * @return {?}
         */
        function (functionData) {
            /** @type {?} */
            var index = _this.currentPreference.functions.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.columnName === functionData.columnName; }));
            if (index > -1) {
                functionData.type = _this.currentPreference.functions[index].type;
            }
            return functionData;
        }));
        this.columnsData.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.currentPreference.columns.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === a.id; }));
            /** @type {?} */
            var indexB = _this.currentPreference.columns.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === b.id; }));
            return _this.getSortIndex(indexA, indexB);
        }));
        this.columnsOrderBy.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.currentPreference.orderBy.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.columnId === a.columnId; }));
            /** @type {?} */
            var indexB = _this.currentPreference.orderBy.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.columnId === b.columnId; }));
            return _this.getSortIndex(indexA, indexB);
        }));
        this.columnsToGroupData.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.currentPreference.groups.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x === a; }));
            /** @type {?} */
            var indexB = _this.currentPreference.groups.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x === b; }));
            return _this.getSortIndex(indexA, indexB);
        }));
    };
    /**
     * @private
     * @param {?} indexA
     * @param {?} indexB
     * @return {?}
     */
    ReportOnDemandComponent.prototype.getSortIndex = /**
     * @private
     * @param {?} indexA
     * @param {?} indexB
     * @return {?}
     */
    function (indexA, indexB) {
        if (indexA === -1) {
            return 0;
        }
        if (indexB === -1) {
            return indexB;
        }
        else {
            return indexA - indexB;
        }
    };
    /**
     * @param {?} event
     * @param {?} id
     * @return {?}
     */
    ReportOnDemandComponent.prototype.showColumnStyleDialog = /**
     * @param {?} event
     * @param {?} id
     * @return {?}
     */
    function (event, id) {
        var _this = this;
        event.stopPropagation();
        /** @type {?} */
        var columnData = Object.assign({}, this.currentPreference.columns.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id === id; })));
        if (Util.isDefined(columnData)) {
            this.dialog
                .open(StyleDialogComponent, {
                data: columnData,
                panelClass: ['o-dialog-class', 'o-table-dialog']
            })
                .afterClosed()
                .subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (Util.isDefined(data) && data) {
                    /** @type {?} */
                    var column = Utils.cloneObject(data);
                    _this.updateColumnStyleConfigurationData(column);
                }
            }));
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updateColumnStyleConfigurationData = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var columns = Utils.cloneObject(this.currentPreference.columns);
        this.currentPreference.columns = [];
        /** @type {?} */
        var indexColumnData = this.columnsData.findIndex((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id === data.id; }));
        if (indexColumnData > -1) {
            this.columnsData[indexColumnData] = data;
        }
        /** @type {?} */
        var indexColumnStyleData = columns.findIndex((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id === data.id; }));
        if (indexColumnStyleData > -1) {
            columns[indexColumnStyleData] = data;
        }
        this.currentPreference.columns = columns;
    };
    /**
     * @param {?} event
     * @param {?} reportFunction
     * @return {?}
     */
    ReportOnDemandComponent.prototype.selectFunction = /**
     * @param {?} event
     * @param {?} reportFunction
     * @return {?}
     */
    function (event, reportFunction) {
        var _this = this;
        event.stopPropagation();
        if (reportFunction.columnName != 'TOTAL') {
            this.dialog
                .open(SelectFunctionDialogComponent, {
                data: reportFunction,
                panelClass: ['o-dialog-class', 'o-table-dialog']
            })
                .afterClosed()
                .subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                //Updated current functions selected and functionsData
                if (data) {
                    _this.updatedFunctionData(data);
                    _this.updatedSelectFunction(data);
                }
            }));
        }
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updatedFunctionData = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        /** @type {?} */
        var index = this.functionsData.findIndex((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.columnName === data.columnName; }));
        if (index === -1) {
            this.functionsData.push(data);
        }
        else {
            this.functionsData[index] = data;
        }
    };
    /**
     * @private
     * @param {?} selectedFunction
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updatedSelectFunction = /**
     * @private
     * @param {?} selectedFunction
     * @return {?}
     */
    function (selectedFunction) {
        var _this = this;
        this.currentPreference.functions.forEach((/**
         * @param {?} data
         * @param {?} i
         * @return {?}
         */
        function (data, i) {
            if (data.columnName === selectedFunction.columnName) {
                _this.currentPreference.functions[i] = data;
            }
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.openSaveAsPreferences = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dialog
            .open(SavePreferencesDialogComponent, {
            panelClass: ['o-dialog-class', 'o-table-dialog']
        })
            .afterClosed()
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (Util.isDefined(data) && data) {
                _this.savePreferences(data);
            }
        }));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.dropColumns = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        moveItemInArray(this.columnsData, event.previousIndex, event.currentIndex);
        this.updateColumnsSort();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.dropGroups = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        moveItemInArray(this.columnsToGroupData, event.previousIndex, event.currentIndex);
        this.updateColumnToGroupSort();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.dropColumnsOrderBy = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        moveItemInArray(this.columnsOrderBy, event.previousIndex, event.currentIndex);
        this.updateColumnGroupBySort();
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updateColumnsSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.currentPreference.columns.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.columnsData.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === a.id; }));
            /** @type {?} */
            var indexB = _this.columnsData.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === b.id; }));
            return indexA - indexB;
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updateColumnGroupBySort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.currentPreference.orderBy.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.columnsOrderBy.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.columnId === a.columnId; }));
            /** @type {?} */
            var indexB = _this.columnsOrderBy.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.columnId === b.columnId; }));
            return indexA - indexB;
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updateColumnToGroupSort = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.currentPreference.groups.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var indexA = _this.columnsToGroupData.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x === a; }));
            /** @type {?} */
            var indexB = _this.columnsToGroupData.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x === b; }));
            return indexA - indexB;
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.onApplyConfigurationClicked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dialog.open(ApplyConfigurationDialogComponent, {
            width: 'calc((75em - 100%) * 1000)',
            maxWidth: '65vw',
            minWidth: '30vw',
            disableClose: true,
            panelClass: ['o-dialog-class', 'o-table-dialog'],
            data: { entity: this.currentPreference.entity, service: this.currentPreference.service },
        }).afterClosed()
            .subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            if (Util.isDefined(data) && data) {
                _this.applyConfiguration(data);
                _this.appliedConfiguration = true;
            }
        }), (/**
         * @param {?} _error
         * @return {?}
         */
        function (_error) {
            _this.appliedConfiguration = false;
        }));
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.openSavePreferences = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (Util.isDefined(this.currentConfiguration.ID)) {
            this.savePreferences({ name: this.currentConfiguration.NAME, description: this.currentConfiguration.DESCRIPTION }, true);
        }
        else {
            this.dialog
                .open(SavePreferencesDialogComponent, {
                panelClass: ['o-dialog-class', 'o-table-dialog']
            })
                .afterClosed()
                .subscribe((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                if (Util.isDefined(data) && data) {
                    _this.savePreferences(data, true);
                }
            }));
        }
    };
    /**
     * @param {?} data
     * @param {?=} update
     * @return {?}
     */
    ReportOnDemandComponent.prototype.savePreferences = /**
     * @param {?} data
     * @param {?=} update
     * @return {?}
     */
    function (data, update) {
        var _this = this;
        /** @type {?} */
        var preference = {
            "name": data.name, "description": data.description,
            "entity": this.currentPreference.entity, "service": this.currentPreference.service, "type": "REPORT", "params": {
                "title": this.currentPreference.title, "groups": this.currentPreference.groups,
                "vertical": this.currentPreference.vertical, "functions": this.currentPreference.functions, "style": this.currentPreference.style,
                "subtitle": this.currentPreference.subtitle, "columns": this.currentPreference.columns, "orderBy": this.currentPreference.orderBy, "entity": this.currentPreference.entity, "service": this.currentPreference.service
            }
        };
        if (update) {
            this.reportService.savePreferences(this.currentConfiguration.ID, preference).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                _this.showConfirmOperatinInSnackBar(res);
            }));
        }
        else {
            this.reportService.saveAsPreferences(preference).subscribe((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                if (res && res.code === 0) {
                    _this.showConfirmOperatinInSnackBar(res);
                }
            }));
        }
    };
    /**
     * @private
     * @param {?} res
     * @return {?}
     */
    ReportOnDemandComponent.prototype.showConfirmOperatinInSnackBar = /**
     * @private
     * @param {?} res
     * @return {?}
     */
    function (res) {
        if (res && res.code === 0) {
            this.snackBarService.open('MESSAGES.SAVED', { icon: 'check_circle' });
        }
    };
    /**
     * @return {?}
     */
    ReportOnDemandComponent.prototype.setFullscreenDialog = /**
     * @return {?}
     */
    function () {
        Utils.setFullscreenDialog(this.fullscreen, this.dialogRef);
        this.fullscreen = !this.fullscreen;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.onSelectionChangeColumns = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var selectedColumn = event.option.value;
        /** @type {?} */
        var selectColumnId = selectedColumn.id;
        this.updateColumnsOrderByData(selectColumnId, event);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.onSelectionChangeGroups = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!event.option.selected)
            return;
        /** @type {?} */
        var groupSelected = event.option.value;
        this.updateColumnsOrderByData(groupSelected, event);
        if (event.option.selected &&
            this.currentPreference.columns.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === groupSelected; })) === -1) {
            /** @type {?} */
            var columnStyleSelected = this.columnsData.filter((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === groupSelected; }));
            if (columnStyleSelected.length > 0) {
                this.addColumnData(columnStyleSelected[0]);
            }
        }
    };
    /**
     * @param {?} columnId
     * @param {?=} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.updateColumnsOrderByData = /**
     * @param {?} columnId
     * @param {?=} event
     * @return {?}
     */
    function (columnId, event) {
        if (!event) {
            /** @type {?} */
            var existColumn = this.columnsArray.findIndex((/**
             * @param {?} col
             * @return {?}
             */
            function (col) { return col === columnId; }));
            if (existColumn === -1) {
                console.warn('The loaded configuration has the column ' + columnId + ' configured but this column does not exist as a table column');
                return;
            }
        }
        /** @type {?} */
        var columnGroupBySelected = { columnId: columnId, ascendent: true };
        /** @type {?} */
        var index = this.columnsOrderBy.findIndex((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.columnId === columnId; }));
        if ((!event) || (event && event.option.selected)) {
            if (index === -1) {
                this.columnsOrderBy.push(columnGroupBySelected);
            }
        }
        else if (index > -1) {
            this.columnsOrderBy.splice(index);
        }
    };
    /**
     * @param {?} columnSelected
     * @return {?}
     */
    ReportOnDemandComponent.prototype.addColumnData = /**
     * @param {?} columnSelected
     * @return {?}
     */
    function (columnSelected) {
        //Object Deep Cloning
        /** @type {?} */
        var currentPreference = Utils.cloneObject(this.currentPreference);
        currentPreference.columns.push(columnSelected);
        this.currentPreference = currentPreference;
        this.updateColumnsSort();
    };
    /**
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.onSelectionChangeFunctions = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (!event.option.selected || event.option.value.columnName === 'TOTAL')
            return;
        /** @type {?} */
        var functionSelect = event.option.value;
        /** @type {?} */
        var columnSelectedToGroup = functionSelect.columnName;
        if (event.option.selected &&
            this.currentPreference.columns.findIndex((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === columnSelectedToGroup; })) === -1) {
            /** @type {?} */
            var column = this.columnsData.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.id === columnSelectedToGroup; }));
            this.addColumnData(column);
        }
    };
    /**
     * @param {?} column
     * @param {?} event
     * @return {?}
     */
    ReportOnDemandComponent.prototype.changeOrder = /**
     * @param {?} column
     * @param {?} event
     * @return {?}
     */
    function (column, event) {
        /** @type {?} */
        var columnSelectedToOrder = this.columnsOrderBy.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.columnId === column.columnId; }));
        if (columnSelectedToOrder) {
            columnSelectedToOrder.ascendent = !columnSelectedToOrder.ascendent;
        }
        event.stopPropagation();
    };
    /**
     * @param {?} column
     * @return {?}
     */
    ReportOnDemandComponent.prototype.isCheckedColumn = /**
     * @param {?} column
     * @return {?}
     */
    function (column) {
        return this.currentPreference.columns.length > 0 ? this.currentPreference.columns.filter((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.id === column.id; })).length > 0 : false;
    };
    /**
     * @param {?} column
     * @return {?}
     */
    ReportOnDemandComponent.prototype.isCheckedFunction = /**
     * @param {?} column
     * @return {?}
     */
    function (column) {
        return this.currentPreference.functions.length > 0 ? this.currentPreference.functions.filter((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return (x.columnName === column.columnName && x.type === column.type) && x.type !== 'TOTAL'; })).length > 0 : false;
    };
    /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    ReportOnDemandComponent.prototype.columnsOrderByCompareFunction = /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    function (co1, co2) {
        return co1.columnId === co2.columnId;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ReportOnDemandComponent.prototype.onCheckboxStyleClick = /**
     * @param {?} value
     * @return {?}
     */
    function (value) {
        if (this.currentPreference.style[value]) {
            this.currentPreference.style[value] = false;
        }
        else {
            this.currentPreference.style[value] = true;
        }
    };
    /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    ReportOnDemandComponent.prototype.columnsCompareFunction = /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    function (co1, co2) {
        return co1.id === co2.id;
    };
    /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    ReportOnDemandComponent.prototype.functionsCompareFunction = /**
     * @param {?} co1
     * @param {?} co2
     * @return {?}
     */
    function (co1, co2) {
        return co1.columnName === co2.columnName;
    };
    /**
     * @protected
     * @param {?} column
     * @return {?}
     */
    ReportOnDemandComponent.prototype.createRenderer = /**
     * @protected
     * @param {?} column
     * @return {?}
     */
    function (column) {
        /** @type {?} */
        var oColumn = this.table.oTableOptions.columns.find((/**
         * @param {?} x
         * @return {?}
         */
        function (x) { return x.attr === column; }));
        /** @type {?} */
        var newRenderer;
        if (Util.isDefined(oColumn) && Util.isDefined(oColumn.type) && oColumn.type !== 'string') {
            /** @type {?} */
            var type = oColumn.type;
            newRenderer = {};
            /** @type {?} */
            var columnRenderer = oColumn.renderer;
            switch (type) {
                case 'currency':
                    newRenderer.type = type;
                    newRenderer.currencySymbol = columnRenderer.currencySymbol;
                    newRenderer.currencySymbolPosition = columnRenderer.currencySymbolPosition;
                    break;
                case 'date':
                    newRenderer.type = type;
                    newRenderer.format = columnRenderer.format;
                    break;
                case 'integer':
                    newRenderer.type = type;
                    newRenderer.grouping = columnRenderer.grouping;
                    newRenderer.thousandSeparator = columnRenderer.thousandSeparator;
                    break;
                case 'real':
                    newRenderer.type = type;
                    newRenderer.decimalSeparator = columnRenderer.decimalSeparator;
                    newRenderer.grouping = columnRenderer.grouping;
                    newRenderer.thousandSeparator = columnRenderer.thousandSeparator;
                    break;
                case 'service':
                    newRenderer.type = type;
                    newRenderer.entity = columnRenderer.entity;
                    newRenderer.service = columnRenderer.service;
                    newRenderer.keyColumn = oColumn.attr;
                    newRenderer.columns = Util.parseArray(columnRenderer.columns);
                    newRenderer.valueColumn = columnRenderer.valueColumn;
                    newRenderer.parentKeys = Util.parseArray(columnRenderer.parentKeys);
                    /** @type {?} */
                    var serviceConfiguration = this.getDefaultServiceConfiguration(columnRenderer.service);
                    if (Util.isObject(serviceConfiguration) && Object.hasOwnProperty(serviceConfiguration.path)) {
                        newRenderer.path = serviceConfiguration.path;
                    }
                    break;
            }
        }
        return newRenderer;
    };
    ReportOnDemandComponent.decorators = [
        { type: Component, args: [{
                    selector: 'o-report-on-demand',
                    template: "<div mat-dialog-title class=\"dialog-title\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n  {{ 'REPORT_ON_DEMAND_TITLE' | oReportsTranslate }}\n  <div>\n    <mat-icon svgIcon=\"ontimize:settings\" #configurationMenuButton [matMenuTriggerFor]=\"configurationMenu\"></mat-icon>\n    <mat-icon aria-label=\"fullscreen dialog\" (click)=\"setFullscreenDialog()\">\n      <ng-container *ngIf=\"fullscreen\">fullscreen_exit</ng-container>\n      <ng-container *ngIf=\"!fullscreen\">fullscreen</ng-container>\n    </mat-icon>\n    <mat-icon svgIcon=\"ontimize:close\" [mat-dialog-close]=\"true\"></mat-icon>\n\n    <mat-menu #configurationMenu=\"matMenu\" class=\"o-mat-menu\">\n      <button type=\"button\" [disabled]=\"!appliedConfiguration\" mat-menu-item (click)=\"openSavePreferences()\">\n        {{ 'BUTTONS.SAVE_CONFIGURATION' | oReportsTranslate }}\n      </button>\n      <button type=\"button\" mat-menu-item (click)=\"openSaveAsPreferences()\">\n        {{ 'BUTTONS.SAVEAS_CONFIGURATION' | oReportsTranslate }}\n      </button>\n      <button type=\"button\" mat-menu-item (click)=\"onApplyConfigurationClicked()\">\n        {{'BUTTONS.APPLY_CONFIGURATION'| oReportsTranslate }}\n      </button>\n    </mat-menu>\n  </div>\n</div>\n<div #dialog mat-dialog-content class=\"dialog-container\">\n  <mat-sidenav-container class=\"mat-sidenav-container\" [class.opened]=\"openedSidenav\" fxFill>\n    <mat-sidenav #sidenav [(opened)]=\"openedSidenav\" mode=\"side\" class=\"report-on-demand-sidenav\">\n      <div fxLayout=\"column\" fxFill fxLayoutGap=\"20px\">\n        <o-button (click)=\"openedSidenav=!openedSidenav\" svg-icon=\"ontimize:menu\" type=\"ICON\" label=\"\"\n          [matTooltip]=\"(sidenav.opened?'HIDE_FILTERS':'SHOW_FILTERS') | oTranslate\">\n        </o-button>\n\n        <div fxLayout=\"column\" *ngIf=\"openedSidenav\" class=\"container-title\" fxLayoutGap=\"10px\">\n          <mat-form-field>\n            <input [(ngModel)]=\"currentPreference.title\" matInput placeholder=\"{{ 'TITLE' | oReportsTranslate }}\">\n          </mat-form-field>\n          <mat-form-field>\n            <input [(ngModel)]=\"currentPreference.subtitle\" matInput placeholder=\"{{ 'SUBTITLE' | oReportsTranslate }}\">\n          </mat-form-field>\n        </div>\n\n        <mat-accordion multi=\"true\" displayMode=\"flat\" fxFlex=\"1 1 auto\" *ngIf=\"openedSidenav\" [@.disabled]=\"true\">\n          <mat-expansion-panel class=\"acordions\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'ORIENTATION' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-radio-group name=\"Orientation\" [(ngModel)]=\"currentPreference.vertical\" fxLayout=\"column\" fxLayoutGap=\"12px\">\n              <mat-radio-button *ngFor=\"let orientation of orientations\" name=\"Orientation\" [value]=\"orientation.value\"\n                [checked]=\"currentPreference.vertical === orientation.value\">\n                {{ orientation.text | oReportsTranslate}}\n              </mat-radio-button>\n            </mat-radio-group>\n          </mat-expansion-panel>\n\n          <mat-expansion-panel class=\"acordions\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'STYLE' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-selection-list dense #settings>\n              <mat-list-option checkboxPosition=\"before\" [selected]=\"currentPreference.style[choice.value]\" *ngFor=\"let choice of stylesArray\"\n                [value]=\"choice.value\" (click)=\"onCheckboxStyleClick(choice.value)\">\n                <div fxLayout=\"row\">\n                  <span fxFlex>\n                    {{choice.viewValue | oReportsTranslate}}\n                  </span>\n                </div>\n              </mat-list-option>\n            </mat-selection-list>\n          </mat-expansion-panel>\n\n          <mat-expansion-panel class=\"acordions\" expanded=\"true\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'COLUMNS' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-selection-list dense #columnsList cdkDropList [cdkDropListData]=\"columnsData\" (cdkDropListDropped)=\"dropColumns($event)\"\n              class=\"columns\" [(ngModel)]=\"currentPreference.columns\" (selectionChange)=\"onSelectionChangeColumns($event)\"\n              [compareWith]=\"columnsCompareFunction\">\n              <mat-list-option checkboxPosition=\"before\" *ngFor=\"let column of columnsData\" [value]=\"column\" cdkDrag>\n                <div fxLayout=\"row\" fxLayoutAlign=\"space-around center\">\n                  <span mat-line fxFlex>\n                    {{column.id | oReportsTranslate}}\n                  </span>\n                  <mat-icon mat-list-icon *ngIf=\"isCheckedColumn(column)\" (click)=\"showColumnStyleDialog($event, column.id)\" class=\"button-edit\">\n                    edit\n                  </mat-icon>\n                  <mat-icon mat-list-icon class=\"button-edit\">drag_handle</mat-icon>\n                </div>\n              </mat-list-option>\n            </mat-selection-list>\n          </mat-expansion-panel>\n          <mat-expansion-panel class=\"acordions\" *ngIf=\"columnsOrderBy.length > 0\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'ORDER_BY' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-selection-list dense #orderByList cdkDropList [cdkDropListData]=\"columnsOrderBy\" (cdkDropListDropped)=\"dropColumnsOrderBy($event)\"\n              class=\"columns\" [(ngModel)]=\"currentPreference.orderBy\" [compareWith]=\"columnsOrderByCompareFunction\">\n              <mat-list-option checkboxPosition=\"before\" *ngFor=\"let column of columnsOrderBy\" [value]=\"column\" cdkDrag>\n                <div fxLayout=\"row\" fxLayoutAlign=\"space-around center\">\n                  <span mat-line fxFlex>\n                    {{column.columnId | oReportsTranslate}}\n                  </span>\n                  <mat-icon *ngIf=\"column.ascendent\" (click)=\"changeOrder(column, $event)\" mat-list-icon svgIcon=\"ontimize:sort_by_alpha_asc\"\n                    class=\"button-edit\"></mat-icon>\n                  <mat-icon *ngIf=\"!column.ascendent\" (click)=\"changeOrder(column, $event)\" mat-list-icon svgIcon=\"ontimize:sort_by_alpha_desc\"\n                    class=\"button-edit\"></mat-icon>\n                  <mat-icon mat-list-icon class=\"button-edit\">drag_handle</mat-icon>\n                </div>\n              </mat-list-option>\n            </mat-selection-list>\n          </mat-expansion-panel>\n          <mat-expansion-panel class=\"acordions\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'GROUPS' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-selection-list dense cdkDropList [cdkDropListData]=\"columnsToGroupData\" (cdkDropListDropped)=\"dropGroups($event)\"\n              [(ngModel)]=\"currentPreference.groups\" (selectionChange)=\"onSelectionChangeGroups($event)\">\n              <mat-list-option checkboxPosition=\"before\" *ngFor=\"let column of columnsToGroupData\" [value]=\"column\" cdkDrag>\n                <div fxLayout=\"row\" fxLayoutAlign=\"space-around center\">\n                  <span mat-line fxFlex>\n                    {{ column | oTranslate }}\n                  </span>\n                  <mat-icon mat-list-icon class=\"button-edit\">drag_handle</mat-icon>\n                </div>\n              </mat-list-option>\n            </mat-selection-list>\n          </mat-expansion-panel>\n\n          <mat-expansion-panel class=\"acordions\" *ngIf=\"functionsData.length>0\">\n            <mat-expansion-panel-header collapsedHeight=\"32px\" expandedHeight=\"32px\">\n              <mat-panel-title>\n                {{ 'FUNCTIONS' | oReportsTranslate }}\n              </mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-selection-list #functionsList dense [(ngModel)]=\"currentPreference.functions\" [compareWith]=\"functionsCompareFunction\"\n              (selectionChange)=\"onSelectionChangeFunctions($event)\">\n              <mat-list-option checkboxPosition=\"before\" *ngFor=\"let function of functionsData\" [value]=\"function\">\n                <div fxLayout=\"row\" fxLayoutAlign=\"space-around center\">\n                  <span mat-line fxFlex>\n                    <ng-container *ngIf=\"function.columnName==='TOTAL'; else functionColumnTemplate\">\n                      {{function.type | oReportsTranslate}}\n                    </ng-container>\n                  </span>\n                  <ng-template #functionColumnTemplate>\n                    {{function.type | oReportsTranslate }}({{function.columnName | oReportsTranslate }})\n                  </ng-template>\n\n                  <mat-icon *ngIf=\"isCheckedFunction(function)\" mat-list-icon (click)=\"selectFunction($event, function)\" class=\"button-edit\">\n                    edit\n                  </mat-icon>\n                </div>\n              </mat-list-option>\n            </mat-selection-list>\n          </mat-expansion-panel>\n        </mat-accordion>\n\n        <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"center center\" *ngIf=\"openedSidenav\">\n          <button type=\"button\" mat-stroked-button class=\"o-report-on-demand-clear-button\" (click)=\"clearCurrentPreferences()\">\n            {{'CLEAR' | oReportsTranslate }}</button>\n          <button type=\"button\" mat-stroked-button class=\"mat-primary\" (click)=\"previewReport()\" [disabled]=\"currentPreference.columns.length===0\">\n            {{'PREVIEW' | oReportsTranslate }}</button>\n        </div>\n\n      </div>\n    </mat-sidenav>\n    <mat-sidenav-content>\n      <div class=\"sidenav-container-content\">\n        <ngx-extended-pdf-viewer #pdfViewer [base64Src]=\"pdf\" [filenameForDownload]=\"currentPreference.title\" [showBookmarkButton]=\"false\"\n          [showPropertiesButton]=\"false\" [showOpenFileButton]=\"false\" useBrowserLocale=\"true\" delayFirstView=\"1000\" [textLayer]=\"true\">\n        </ngx-extended-pdf-viewer>\n      </div>\n    </mat-sidenav-content>\n  </mat-sidenav-container>\n</div>\n",
                    encapsulation: ViewEncapsulation.None,
                    host: {
                        '[class.o-report-on-demand]': 'true'
                    },
                    styles: [".o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-title .mat-icon{cursor:pointer}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content{max-height:calc(100% - 36px - 16px);height:100%;padding-top:16px;padding-bottom:0}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content ngx-extended-pdf-viewer .zoom{height:100%}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-icon{cursor:pointer}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav{visibility:visible!important;transform:none;top:0;left:0;padding:8px 16px;border:1px solid transparent}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-drawer-inner-container{overflow:hidden}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-dialog-actions{min-height:auto;padding-top:0}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-dialog-actions button.o-report-on-demand-clear-button{min-width:80px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-radio-group{margin:0 12px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion{overflow-y:scroll}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .acordions.mat-expansion-panel{border-radius:0;box-shadow:none;margin-bottom:8px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .acordions.mat-expansion-panel:last-of-type{margin-bottom:0}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .acordions.mat-expansion-panel .mat-expansion-panel-header{padding:0 8px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .acordions.mat-expansion-panel .mat-expansion-panel-body{padding:0}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .mat-list-option .button-edit{cursor:pointer}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .mat-list-option.cdk-drag{cursor:move}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .mat-list-option .mat-list-item-content{padding:0 0 0 8px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav .mat-accordion .mat-list-option .mat-list-item-content .mat-list-text{padding-right:8px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav.mat-drawer-opened{border:1px solid #dee1e6;border-radius:4px;width:256px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav-container{background-color:transparent}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav-container.opened .sidenav-container-content{margin-left:16px}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav-content{overflow:hidden}.o-dialog-class .mat-dialog-container .o-report-on-demand .mat-dialog-content .mat-sidenav-content .sidenav-container-content{margin-left:66px;height:100%}"]
                }] }
    ];
    /** @nocollapse */
    ReportOnDemandComponent.ctorParameters = function () { return [
        { type: Injector },
        { type: MatDialogRef },
        { type: OTableComponent, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
    ]; };
    ReportOnDemandComponent.propDecorators = {
        columnsList: [{ type: ViewChild, args: ['columnsList', { static: false },] }],
        functionsList: [{ type: ViewChild, args: ['functionsList', { static: false },] }],
        orderByList: [{ type: ViewChild, args: ['orderByList', { static: false },] }]
    };
    return ReportOnDemandComponent;
}());
export { ReportOnDemandComponent };
if (false) {
    /** @type {?} */
    ReportOnDemandComponent.prototype.columnsList;
    /** @type {?} */
    ReportOnDemandComponent.prototype.functionsList;
    /** @type {?} */
    ReportOnDemandComponent.prototype.orderByList;
    /** @type {?} */
    ReportOnDemandComponent.prototype.orientations;
    /** @type {?} */
    ReportOnDemandComponent.prototype.functionsData;
    /**
     * @type {?}
     * @private
     */
    ReportOnDemandComponent.prototype.initialFunctionsData;
    /** @type {?} */
    ReportOnDemandComponent.prototype.appliedConfiguration;
    /** @type {?} */
    ReportOnDemandComponent.prototype.selectedFunctions;
    /** @type {?} */
    ReportOnDemandComponent.prototype.stylesArray;
    /** @type {?} */
    ReportOnDemandComponent.prototype.columnsData;
    /**
     * @type {?}
     * @private
     */
    ReportOnDemandComponent.prototype.initialColumnsData;
    /** @type {?} */
    ReportOnDemandComponent.prototype.selectedColumnsData;
    /** @type {?} */
    ReportOnDemandComponent.prototype.columnsOrderBy;
    /** @type {?} */
    ReportOnDemandComponent.prototype.columnsToGroupData;
    /**
     * @type {?}
     * @private
     */
    ReportOnDemandComponent.prototype.initialColumnsToGroupData;
    /** @type {?} */
    ReportOnDemandComponent.prototype.openedSidenav;
    /** @type {?} */
    ReportOnDemandComponent.prototype.fullscreen;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.service;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.language;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.columnsArray;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.table;
    /**
     * @type {?}
     * @private
     */
    ReportOnDemandComponent.prototype.blankPdf;
    /** @type {?} */
    ReportOnDemandComponent.prototype.currentPreference;
    /** @type {?} */
    ReportOnDemandComponent.prototype.currentConfiguration;
    /** @type {?} */
    ReportOnDemandComponent.prototype.pdf;
    /** @type {?} */
    ReportOnDemandComponent.prototype.translateService;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.appConfig;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.snackBarService;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.reportService;
    /**
     * @type {?}
     * @protected
     */
    ReportOnDemandComponent.prototype.dialogService;
    /** @type {?} */
    ReportOnDemandComponent.prototype.dialog;
    /** @type {?} */
    ReportOnDemandComponent.prototype.injector;
    /** @type {?} */
    ReportOnDemandComponent.prototype.dialogRef;
    /** @type {?} */
    ReportOnDemandComponent.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0LW9uLWRlbWFuZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9vbnRpbWl6ZS13ZWItbmd4LXJlcG9ydC8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3JlcG9ydC1vbi1kZW1hbmQvcmVwb3J0LW9uLWRlbWFuZC9yZXBvcnQtb24tZGVtYW5kLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBZSxlQUFlLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RSxPQUFPLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RSxPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMxRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQTBCLE1BQU0sbUJBQW1CLENBQUM7QUFDN0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsZUFBZSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDcEYsT0FBTyxFQUFFLFNBQVMsRUFBRSxhQUFhLEVBQVcsZUFBZSxFQUFFLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNoSSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFNcEUsT0FBTyxFQUFFLHlCQUF5QixFQUFzQixNQUFNLHdDQUF3QyxDQUFDO0FBQ3ZHLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUM1QyxPQUFPLEVBQUUsaUNBQWlDLEVBQUUsTUFBTSw2REFBNkQsQ0FBQztBQUNoSCxPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSw4REFBOEQsQ0FBQztBQUM5RyxPQUFPLEVBQUUsNkJBQTZCLEVBQUUsTUFBTSw0REFBNEQsQ0FBQztBQUUzRyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUU5RTtJQTRE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RDs7SUFDckQsdURBQTZDOztJQUM3QyxvREFBOEI7O0lBRTlCLDhDQVFFOztJQUdGLDhDQUF5Qzs7Ozs7SUFDekMscURBQWlEOztJQUNqRCxzREFBcUM7O0lBQ3JDLGlEQUFrRDs7SUFFbEQscURBQWlDOzs7OztJQUNqQyw0REFBeUM7O0lBQ3pDLGdEQUFxQzs7SUFDckMsNkNBQW1DOzs7OztJQUVuQywwQ0FBMEI7Ozs7O0lBQzFCLDJDQUEyQjs7Ozs7SUFDM0IsK0NBQXNDOzs7OztJQUN0Qyx3Q0FBaUM7Ozs7O0lBQ2pDLDJDQUFzcUQ7O0lBRXRxRCxvREFBNkM7O0lBQzdDLHVEQUFrRDs7SUFDbEQsc0NBQW1COztJQUVuQixtREFBMkM7Ozs7O0lBQzNDLDRDQUErQjs7Ozs7SUFDL0Isa0RBQTJDOzs7OztJQUMzQyxnREFBd0M7Ozs7O0lBQ3hDLGdEQUF1Qzs7SUFDdkMseUNBQXlCOztJQUd2QiwyQ0FBeUI7O0lBQ3pCLDRDQUF1RDs7SUFDdkQsdUNBQXFEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2RrRHJhZ0Ryb3AsIG1vdmVJdGVtSW5BcnJheSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9kcmFnLWRyb3AnO1xuaW1wb3J0IHsgSW5qZWN0b3IsIFZpZXdDaGlsZCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE1hdFNlbGVjdGlvbkxpc3QsIE1hdFNlbGVjdGlvbkxpc3RDaGFuZ2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbCc7XG5pbXBvcnQgeyBNYXREaWFsb2csIE1hdERpYWxvZ1JlZiwgTUFUX0RJQUxPR19EQVRBIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGlhbG9nJztcbmltcG9ydCB7IEFwcENvbmZpZywgRGlhbG9nU2VydmljZSwgT0NvbHVtbiwgT1RhYmxlQ29tcG9uZW50LCBPVHJhbnNsYXRlU2VydmljZSwgU25hY2tCYXJTZXJ2aWNlLCBVdGlsIH0gZnJvbSAnb250aW1pemUtd2ViLW5neCc7XG5pbXBvcnQgeyBPUmVwb3J0U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL28tcmVwb3J0LnNlcnZpY2UnO1xuaW1wb3J0IHsgT1JlcG9ydENvbHVtblN0eWxlIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvcmVwb3J0LWNvbHVtbi1zdHlsZS50eXBlJztcbmltcG9ydCB7IE9SZXBvcnRDb2x1bW4gfSBmcm9tICcuLi8uLi8uLi90eXBlcy9yZXBvcnQtY29sdW1uLnR5cGUnO1xuaW1wb3J0IHsgT1JlcG9ydENvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi8uLi90eXBlcy9yZXBvcnQtY29uZmlndXJhdGlvbi50eXBlJztcbmltcG9ydCB7IE9SZXBvcnRGdW5jdGlvbiB9IGZyb20gJy4uLy4uLy4uL3R5cGVzL3JlcG9ydC1mdW5jdGlvbi50eXBlJztcbmltcG9ydCB7IE9SZXBvcnRPcmRlckJ5IH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvcmVwb3J0LW9yZGVyQnkudHlwZSc7XG5pbXBvcnQgeyBEZWZhdWx0T1JlcG9ydFByZWZlcmVuY2VzLCBPUmVwb3J0UHJlZmVyZW5jZXMgfSBmcm9tICcuLi8uLi8uLi90eXBlcy9yZXBvcnQtcHJlZmVyZW5jZXMudHlwZSc7XG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJy4uLy4uLy4uL3V0aWwvdXRpbHMnO1xuaW1wb3J0IHsgQXBwbHlDb25maWd1cmF0aW9uRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vYXBwbHktY29uZmlndXJhdGlvbi9hcHBseS1jb25maWd1cmF0aW9uLWRpYWxvZy5jb21wb25lbnQnO1xuaW1wb3J0IHsgU2F2ZVByZWZlcmVuY2VzRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vc2F2ZS1wcmVmZXJlbmNlcy1kaWFsb2cvc2F2ZS1wcmVmZXJlbmNlcy1kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7IFNlbGVjdEZ1bmN0aW9uRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vc2VsZWN0LWZ1bmN0aW9uLWRpYWxvZy9zZWxlY3QtZnVuY3Rpb24tZGlhbG9nLmNvbXBvbmVudCc7XG5cbmltcG9ydCB7IFN0eWxlRGlhbG9nQ29tcG9uZW50IH0gZnJvbSAnLi4vc3R5bGUtZGlhbG9nL3N0eWxlLWRpYWxvZy5jb21wb25lbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdvLXJlcG9ydC1vbi1kZW1hbmQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcmVwb3J0LW9uLWRlbWFuZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3JlcG9ydC1vbi1kZW1hbmQuY29tcG9uZW50LnNjc3MnXSxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3Muby1yZXBvcnQtb24tZGVtYW5kXSc6ICd0cnVlJ1xuICB9XG59KVxuXG5leHBvcnQgY2xhc3MgUmVwb3J0T25EZW1hbmRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIEBWaWV3Q2hpbGQoJ2NvbHVtbnNMaXN0JywgeyBzdGF0aWM6IGZhbHNlIH0pIGNvbHVtbnNMaXN0OiBNYXRTZWxlY3Rpb25MaXN0O1xuICBAVmlld0NoaWxkKCdmdW5jdGlvbnNMaXN0JywgeyBzdGF0aWM6IGZhbHNlIH0pIGZ1bmN0aW9uc0xpc3Q6IE1hdFNlbGVjdGlvbkxpc3Q7XG4gIEBWaWV3Q2hpbGQoJ29yZGVyQnlMaXN0JywgeyBzdGF0aWM6IGZhbHNlIH0pIG9yZGVyQnlMaXN0OiBNYXRTZWxlY3Rpb25MaXN0O1xuXG4gIHB1YmxpYyBvcmllbnRhdGlvbnMgPSBbeyB0ZXh0OiBcInZlcnRpY2FsXCIsIHZhbHVlOiB0cnVlIH0sIHsgdGV4dDogXCJob3Jpem9udGFsXCIsIHZhbHVlOiBmYWxzZSB9XTtcbiAgcHVibGljIGZ1bmN0aW9uc0RhdGE6IE9SZXBvcnRGdW5jdGlvbltdID0gW107XG4gIHByaXZhdGUgaW5pdGlhbEZ1bmN0aW9uc0RhdGE6IE9SZXBvcnRGdW5jdGlvbltdID0gW107XG4gIHB1YmxpYyBhcHBsaWVkQ29uZmlndXJhdGlvbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgc2VsZWN0ZWRGdW5jdGlvbnMgPSBbXTtcblxuICBwdWJsaWMgc3R5bGVzQXJyYXkgPSBbXG4gICAgeyB2YWx1ZTogJ2dyaWQnLCB2aWV3VmFsdWU6ICdHUklEJyB9LFxuICAgIHsgdmFsdWU6ICdyb3dOdW1iZXInLCB2aWV3VmFsdWU6ICdST1dfTlVNQkVSJyB9LFxuICAgIHsgdmFsdWU6ICdjb2x1bW5OYW1lJywgdmlld1ZhbHVlOiAnQ09MVU1OU19OQU1FUycgfSxcbiAgICB7IHZhbHVlOiAnYmFja2dyb3VuZE9uT2RkUm93cycsIHZpZXdWYWx1ZTogJ0JBQ0tHUk9VTkRfT0REX1JPV1MnIH0sXG4gICAgeyB2YWx1ZTogJ2hpZGVHcm91cERldGFpbHMnLCB2aWV3VmFsdWU6ICdHUk9VUF9ERVRBSUxTJyB9LFxuICAgIHsgdmFsdWU6ICdncm91cE5ld1BhZ2UnLCB2aWV3VmFsdWU6ICdHUk9VUF9QQUdFJyB9LFxuICAgIHsgdmFsdWU6ICdmaXJzdEdyb3VwTmV3UGFnZScsIHZpZXdWYWx1ZTogJ0ZJUlNUX0dST1VQX1BBR0UnIH1cbiAgXTtcblxuXG4gIHB1YmxpYyBjb2x1bW5zRGF0YTogQXJyYXk8T1JlcG9ydENvbHVtbj47XG4gIHByaXZhdGUgaW5pdGlhbENvbHVtbnNEYXRhOiBBcnJheTxPUmVwb3J0Q29sdW1uPjtcbiAgcHVibGljIHNlbGVjdGVkQ29sdW1uc0RhdGE6IHN0cmluZ1tdO1xuICBwdWJsaWMgY29sdW1uc09yZGVyQnk6IEFycmF5PE9SZXBvcnRPcmRlckJ5PiA9IFtdO1xuXG4gIHB1YmxpYyBjb2x1bW5zVG9Hcm91cERhdGE6IGFueVtdO1xuICBwcml2YXRlIGluaXRpYWxDb2x1bW5zVG9Hcm91cERhdGE6IGFueVtdO1xuICBwdWJsaWMgb3BlbmVkU2lkZW5hdjogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBmdWxsc2NyZWVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJvdGVjdGVkIHNlcnZpY2U6IHN0cmluZztcbiAgcHJvdGVjdGVkIGxhbmd1YWdlOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBjb2x1bW5zQXJyYXk6IEFycmF5PHN0cmluZz47XG4gIHByb3RlY3RlZCB0YWJsZTogT1RhYmxlQ29tcG9uZW50O1xuICBwcml2YXRlIGJsYW5rUGRmOiBzdHJpbmcgPSAnSlZCRVJpMHhMallLSmNPa3c3ekR0c09mQ2pJZ01DQnZZbW9LUER3dlRHVnVaM1JvSURNZ01DQlNMMFpwYkhSbGNpOUdiR0YwWlVSbFkyOWtaVDQrQ25OMGNtVmhiUXA0bkRQUU0xUW81eXBVTUZBdzBETXdzbEF3dFRUVk16STNWYkF3TWRTek1ETlVLRXJsQ3RkU3lPTUtWQUFBdHhJSXJncGxibVJ6ZEhKbFlXMEtaVzVrYjJKcUNnb3pJREFnYjJKcUNqVXdDbVZ1Wkc5aWFnb0tOU0F3SUc5aWFnbzhQQW8rUGdwbGJtUnZZbW9LQ2pZZ01DQnZZbW9LUER3dlJtOXVkQ0ExSURBZ1Vnb3ZVSEp2WTFObGRGc3ZVRVJHTDFSbGVIUmRDajQrQ21WdVpHOWlhZ29LTVNBd0lHOWlhZ284UEM5VWVYQmxMMUJoWjJVdlVHRnlaVzUwSURRZ01DQlNMMUpsYzI5MWNtTmxjeUEySURBZ1VpOU5aV1JwWVVKdmVGc3dJREFnTlRrMUxqTXdNemt6TnpBd056ZzNOQ0E0TkRFdU9EZzVOell6TnpjNU5USTRYUzlIY205MWNEdzhMMU12VkhKaGJuTndZWEpsYm1ONUwwTlRMMFJsZG1salpWSkhRaTlKSUhSeWRXVStQaTlEYjI1MFpXNTBjeUF5SURBZ1VqNCtDbVZ1Wkc5aWFnb0tOQ0F3SUc5aWFnbzhQQzlVZVhCbEwxQmhaMlZ6Q2k5U1pYTnZkWEpqWlhNZ05pQXdJRklLTDAxbFpHbGhRbTk0V3lBd0lEQWdOVGsxSURnME1TQmRDaTlMYVdSeld5QXhJREFnVWlCZENpOURiM1Z1ZENBeFBqNEtaVzVrYjJKcUNnbzNJREFnYjJKcUNqdzhMMVI1Y0dVdlEyRjBZV3h2Wnk5UVlXZGxjeUEwSURBZ1Vnb3ZUM0JsYmtGamRHbHZibHN4SURBZ1VpQXZXRmxhSUc1MWJHd2diblZzYkNBd1hRb3ZUR0Z1WnlobGN5MUZVeWtLUGo0S1pXNWtiMkpxQ2dvNElEQWdiMkpxQ2p3OEwwRjFkR2h2Y2p4R1JVWkdNREExTURBd05qRXdNRGMwTURBM01qQXdOamt3TURZek1EQTJPVEF3TmpFd01ESXdNREEwUkRBd05qRXdNRGN5TURBM05EQXdSVVF3TURaRk1EQTJOVEF3TjBFd01ESXdNREExTkRBd05qa3dNRFpETURBM05qQXdOalUrQ2k5RGNtVmhkRzl5UEVaRlJrWXdNRFUzTURBM01qQXdOamt3TURjME1EQTJOVEF3TnpJK0NpOVFjbTlrZFdObGNqeEdSVVpHTURBMFF6QXdOamt3TURZeU1EQTNNakF3TmpVd01EUkdNREEyTmpBd05qWXdNRFk1TURBMk16QXdOalV3TURJd01EQXpOekF3TWtVd01ETXhQZ292UTNKbFlYUnBiMjVFWVhSbEtFUTZNakF5TWpBMU1UQXhORFV5TURZck1ESW5NREFuS1Q0K0NtVnVaRzlpYWdvS2VISmxaZ293SURrS01EQXdNREF3TURBd01DQTJOVFV6TlNCbUlBb3dNREF3TURBd01qTTBJREF3TURBd0lHNGdDakF3TURBd01EQXdNVGtnTURBd01EQWdiaUFLTURBd01EQXdNREUwTUNBd01EQXdNQ0J1SUFvd01EQXdNREF3TkRBeUlEQXdNREF3SUc0Z0NqQXdNREF3TURBeE5Ua2dNREF3TURBZ2JpQUtNREF3TURBd01ERTRNU0F3TURBd01DQnVJQW93TURBd01EQXdOVEF3SURBd01EQXdJRzRnQ2pBd01EQXdNREExT1RZZ01EQXdNREFnYmlBS2RISmhhV3hsY2dvOFBDOVRhWHBsSURrdlVtOXZkQ0EzSURBZ1Vnb3ZTVzVtYnlBNElEQWdVZ292U1VRZ1d5QThSRGRCT0RoQ1JUUkZSRUZEUmtVMVJERkdNVEl3TXpORk1EVXlOMEpFUmtVK0NqeEVOMEU0T0VKRk5FVkVRVU5HUlRWRU1VWXhNakF6TTBVd05USTNRa1JHUlQ0Z1hRb3ZSRzlqUTJobFkydHpkVzBnTHpnd05UQTVORFU0UWpneU4wUkNSRFEyUXpsRU9EZEJNalk0TmpkQ05FRkRDajQrQ25OMFlYSjBlSEpsWmdvNE56WUtKU1ZGVDBZSyc7XG5cbiAgcHVibGljIGN1cnJlbnRQcmVmZXJlbmNlOiBPUmVwb3J0UHJlZmVyZW5jZXM7XG4gIHB1YmxpYyBjdXJyZW50Q29uZmlndXJhdGlvbjogT1JlcG9ydENvbmZpZ3VyYXRpb247XG4gIHB1YmxpYyBwZGY6IHN0cmluZztcblxuICBwdWJsaWMgdHJhbnNsYXRlU2VydmljZTogT1RyYW5zbGF0ZVNlcnZpY2U7XG4gIHByb3RlY3RlZCBhcHBDb25maWc6IEFwcENvbmZpZztcbiAgcHJvdGVjdGVkIHNuYWNrQmFyU2VydmljZTogU25hY2tCYXJTZXJ2aWNlO1xuICBwcm90ZWN0ZWQgcmVwb3J0U2VydmljZTogT1JlcG9ydFNlcnZpY2U7XG4gIHByb3RlY3RlZCBkaWFsb2dTZXJ2aWNlOiBEaWFsb2dTZXJ2aWNlO1xuICBwdWJsaWMgZGlhbG9nOiBNYXREaWFsb2c7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGluamVjdG9yOiBJbmplY3RvcixcbiAgICBwdWJsaWMgZGlhbG9nUmVmOiBNYXREaWFsb2dSZWY8UmVwb3J0T25EZW1hbmRDb21wb25lbnQ+LFxuICAgIEBJbmplY3QoTUFUX0RJQUxPR19EQVRBKSBwdWJsaWMgZGF0YTogT1RhYmxlQ29tcG9uZW50XG4gICkge1xuICAgIHRoaXMuYXBwQ29uZmlnID0gdGhpcy5pbmplY3Rvci5nZXQoQXBwQ29uZmlnKTtcbiAgICB0aGlzLnRyYW5zbGF0ZVNlcnZpY2UgPSB0aGlzLmluamVjdG9yLmdldDxPVHJhbnNsYXRlU2VydmljZT4oT1RyYW5zbGF0ZVNlcnZpY2UpO1xuICAgIHRoaXMuc25hY2tCYXJTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQ8U25hY2tCYXJTZXJ2aWNlPihTbmFja0JhclNlcnZpY2UpO1xuICAgIHRoaXMucmVwb3J0U2VydmljZSA9IHRoaXMuaW5qZWN0b3IuZ2V0PE9SZXBvcnRTZXJ2aWNlPihPUmVwb3J0U2VydmljZSk7XG4gICAgdGhpcy5kaWFsb2dTZXJ2aWNlID0gdGhpcy5pbmplY3Rvci5nZXQ8RGlhbG9nU2VydmljZT4oRGlhbG9nU2VydmljZSk7XG4gICAgdGhpcy5kaWFsb2cgPSB0aGlzLmluamVjdG9yLmdldDxNYXREaWFsb2c+KE1hdERpYWxvZyk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmluaXRpYWxpemUoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBpbml0aWFsaXplKCkge1xuICAgIHRoaXMudGFibGUgPSB0aGlzLmRhdGE7XG4gICAgdGhpcy5sYW5ndWFnZSA9IHRoaXMudHJhbnNsYXRlU2VydmljZS5nZXRDdXJyZW50TGFuZygpO1xuICAgIHRoaXMuc2VydmljZSA9IHRoaXMudGFibGUuc2VydmljZTtcbiAgICB0aGlzLmNvbHVtbnNBcnJheSA9IHRoaXMucGFyc2VDb2x1bW5zVmlzaWJsZSgpO1xuICAgIHRoaXMuaW5pdGlhbENvbHVtbnNEYXRhID0gdGhpcy5wYXJzZVJlcG9ydENvbHVtbih0aGlzLmNvbHVtbnNBcnJheSk7XG4gICAgdGhpcy5pbml0aWFsQ29sdW1uc1RvR3JvdXBEYXRhID0gdGhpcy5jb2x1bW5zQXJyYXk7XG4gICAgdGhpcy5jdXJyZW50Q29uZmlndXJhdGlvbiA9IHsgRU5USVRZOiB0aGlzLnRhYmxlLmVudGl0eSB9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZVJlcG9ydFByZWZlcmVuY2VzKCk7XG5cbiAgICB0aGlzLmdldEZ1bmN0aW9ucygpO1xuICB9XG5cbiAgcHVibGljIGdldERlZmF1bHRTZXJ2aWNlQ29uZmlndXJhdGlvbihzZXJ2aWNlTmFtZT86IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3QgY29uZmlndXJhdGlvbiA9IHRoaXMuYXBwQ29uZmlnLmdldFNlcnZpY2VDb25maWd1cmF0aW9uKCk7XG4gICAgbGV0IHNlcnZDb25maWcgPSB7fTtcbiAgICBpZiAoc2VydmljZU5hbWUgJiYgY29uZmlndXJhdGlvbi5oYXNPd25Qcm9wZXJ0eShzZXJ2aWNlTmFtZSkpIHtcbiAgICAgIHNlcnZDb25maWcgPSBjb25maWd1cmF0aW9uW3NlcnZpY2VOYW1lXTtcbiAgICB9XG4gICAgcmV0dXJuIHNlcnZDb25maWc7XG4gIH1cblxuICBwdWJsaWMgcHJldmlld1JlcG9ydCgpOiB2b2lkIHtcbiAgICB0aGlzLm9wZW5SZXBvcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhckN1cnJlbnRQcmVmZXJlbmNlcygpIHtcbiAgICB0aGlzLmluaXRpYWxpemVSZXBvcnRQcmVmZXJlbmNlcygpO1xuICAgIGlmICh0aGlzLmNvbHVtbnNMaXN0KSB7XG4gICAgICB0aGlzLmNvbHVtbnNMaXN0LmRlc2VsZWN0QWxsKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmZ1bmN0aW9uc0xpc3QpIHtcbiAgICAgIHRoaXMuZnVuY3Rpb25zTGlzdC5kZXNlbGVjdEFsbCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9yZGVyQnlMaXN0KSB7XG4gICAgICB0aGlzLm9yZGVyQnlMaXN0LmRlc2VsZWN0QWxsKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGluaXRpYWxpemVSZXBvcnRQcmVmZXJlbmNlcygpIHtcbiAgICAvKiBpbml0aWFsaXplIGNvbHVtbnNEYXRhIGFuZCBmdW5jdGlvbnNEYXRhIGJlY2F1c2UgdGhleSBhcmUgbW9kaWZpZWQgYnlcbiAgICBjaGFuZ2luZyBzZXR0aW5ncyAqL1xuICAgIHRoaXMuY29sdW1uc0RhdGEgPSBVdGlscy5jbG9uZU9iamVjdCh0aGlzLmluaXRpYWxDb2x1bW5zRGF0YSk7XG4gICAgdGhpcy5mdW5jdGlvbnNEYXRhID0gVXRpbHMuY2xvbmVPYmplY3QodGhpcy5pbml0aWFsRnVuY3Rpb25zRGF0YSk7XG4gICAgdGhpcy5jb2x1bW5zVG9Hcm91cERhdGEgPSBVdGlscy5jbG9uZU9iamVjdCh0aGlzLmluaXRpYWxDb2x1bW5zVG9Hcm91cERhdGEpO1xuICAgIHRoaXMuY29sdW1uc09yZGVyQnkgPSBbXTtcbiAgICB0aGlzLnBkZiA9IHRoaXMuYmxhbmtQZGY7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZSA9IG5ldyBEZWZhdWx0T1JlcG9ydFByZWZlcmVuY2VzKCk7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5lbnRpdHkgPSB0aGlzLnRhYmxlLmVudGl0eTtcbiAgICB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnNlcnZpY2UgPSB0aGlzLnRhYmxlLnNlcnZpY2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgcGFyc2VDb2x1bW5zVmlzaWJsZSgpIHtcbiAgICBjb25zdCBjb2x1bW5zQXJyYXkgPSBVdGlsLnBhcnNlQXJyYXkodGhpcy50YWJsZS5jb2x1bW5zKTtcbiAgICByZXR1cm4gdGhpcy50YWJsZS5vVGFibGVPcHRpb25zLmNvbHVtbnMuZmlsdGVyKG9Db2wgPT4gb0NvbC50eXBlICE9PSBcImltYWdlXCIgJiYgb0NvbC52aXNpYmxlICYmIGNvbHVtbnNBcnJheS5maW5kSW5kZXgoY29sdW1uID0+IGNvbHVtbiA9PT0gb0NvbC5hdHRyKSA+IC0xKS5tYXAoXG4gICAgICAoeDogT0NvbHVtbikgPT4geC5hdHRyXG4gICAgKVxuICB9XG5cbiAgcHJvdGVjdGVkIHBhcnNlUmVwb3J0Q29sdW1uKGNvbHVtbnM6IGFueVtdKTogT1JlcG9ydENvbHVtbltdIHtcbiAgICByZXR1cm4gY29sdW1ucy5tYXAoY29sdW1uID0+IHtcbiAgICAgIGxldCByZXBvcnRDb2x1bW46IE9SZXBvcnRDb2x1bW4gPSB7XG4gICAgICAgIGlkOiBjb2x1bW4sIG5hbWU6IHRoaXMudHJhbnNsYXRlU2VydmljZS5nZXQoY29sdW1uKVxuICAgICAgfTtcbiAgICAgIGxldCBjb2x1bW5TdHlsZSA9IHRoaXMucGFyc2VDb2x1bW5TdHlsZShjb2x1bW4pO1xuICAgICAgaWYgKFV0aWwuaXNPYmplY3QoY29sdW1uU3R5bGUpICYmIE9iamVjdC5rZXlzKGNvbHVtblN0eWxlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlcG9ydENvbHVtbi5jb2x1bW5TdHlsZSA9IGNvbHVtblN0eWxlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcG9ydENvbHVtbjtcbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwYXJzZUNvbHVtblN0eWxlKGNvbHVtbjogc3RyaW5nKTogT1JlcG9ydENvbHVtblN0eWxlIHtcbiAgICBsZXQgY29sdW1uU3R5bGU6IE9SZXBvcnRDb2x1bW5TdHlsZSA9IHt9O1xuICAgIGNvbnN0IHJlbmRlcmVyID0gdGhpcy5jcmVhdGVSZW5kZXJlcihjb2x1bW4pO1xuICAgIGlmIChVdGlsLmlzRGVmaW5lZChyZW5kZXJlcikgJiYgVXRpbC5pc0RlZmluZWQocmVuZGVyZXIudHlwZSkpIHtcbiAgICAgIGNvbHVtblN0eWxlLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgfVxuICAgIHJldHVybiBjb2x1bW5TdHlsZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBwYXJzZUNvbHVtbnNPcmRlckJ5KGNvbHVtbnNPcmRlckJ5OiBhbnkpOiBPUmVwb3J0T3JkZXJCeVtdIHtcbiAgICByZXR1cm4gY29sdW1uc09yZGVyQnkubWFwKGNvbHVtbiA9PiB7XG4gICAgICByZXR1cm4geyBjb2x1bW5JZDogY29sdW1uLmNvbHVtbklkLCBjb2x1bW5OYW1lOiBjb2x1bW4ubmFtZSwgYXNjZW5kZW50OiBjb2x1bW4uYXNjZW5kZW50IH1cbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvcGVuUmVwb3J0KCkge1xuICAgIGNvbnN0IHNlcnZpY2VDb25maWd1cmF0aW9uID0gdGhpcy5nZXREZWZhdWx0U2VydmljZUNvbmZpZ3VyYXRpb24odGhpcy5jdXJyZW50UHJlZmVyZW5jZS5zZXJ2aWNlKTtcbiAgICBsZXQgcGF0aFNlcnZpY2U6IHN0cmluZztcbiAgICBpZiAoVXRpbC5pc09iamVjdChzZXJ2aWNlQ29uZmlndXJhdGlvbikgJiYgc2VydmljZUNvbmZpZ3VyYXRpb24uaGFzT3duUHJvcGVydHkoJ3BhdGgnKSkge1xuICAgICAgcGF0aFNlcnZpY2UgPSBzZXJ2aWNlQ29uZmlndXJhdGlvbi5wYXRoO1xuICAgIH1cbiAgICB0aGlzLnJlcG9ydFNlcnZpY2UuY3JlYXRlUmVwb3J0KHtcbiAgICAgIFwidGl0bGVcIjogdGhpcy5jdXJyZW50UHJlZmVyZW5jZS50aXRsZSwgXCJncm91cHNcIjogdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5ncm91cHMsIFwiZW50aXR5XCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZW50aXR5LCBcInBhdGhcIjogcGF0aFNlcnZpY2UsXG4gICAgICBcInNlcnZpY2VcIjogdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5zZXJ2aWNlLCBcInZlcnRpY2FsXCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2UudmVydGljYWwsIFwiZnVuY3Rpb25zXCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZnVuY3Rpb25zLFxuICAgICAgXCJzdHlsZVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnN0eWxlLCBcInN1YnRpdGxlXCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2Uuc3VidGl0bGUsIFwiY29sdW1uc1wiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmNvbHVtbnMsIFwib3JkZXJCeVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLm9yZGVyQnksXG4gICAgICBcImxhbmd1YWdlXCI6IHRoaXMubGFuZ3VhZ2VcblxuICAgIH0pLnN1YnNjcmliZShyZXMgPT4ge1xuICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YS5sZW5ndGggJiYgcmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgdGhpcy5wZGYgPSByZXMuZGF0YVswXS5maWxlO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0RnVuY3Rpb25zKCkge1xuICAgIHRoaXMucmVwb3J0U2VydmljZS5nZXRGdW5jdGlvbnMoe1xuICAgICAgXCJjb2x1bW5zXCI6IHRoaXMuY29sdW1uc0FycmF5LCBcImVudGl0eVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmVudGl0eSxcbiAgICAgIFwic2VydmljZVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnNlcnZpY2UsIFwibGFuZ3VhZ2VcIjogdGhpcy5sYW5ndWFnZVxuICAgIH0pLnN1YnNjcmliZShyZXMgPT4ge1xuICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YS5sZW5ndGggJiYgcmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgdGhpcy5mdW5jdGlvbnNEYXRhID0gdGhpcy5wYXJzZURlZmF1bHRGdW5jdGlvbnNEYXRhKHJlcy5kYXRhWzBdLmZ1bmN0aW9ucyk7XG4gICAgICAgIHRoaXMuaW5pdGlhbEZ1bmN0aW9uc0RhdGEgPSBVdGlscy5jbG9uZU9iamVjdCh0aGlzLmZ1bmN0aW9uc0RhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcGFyc2VEZWZhdWx0RnVuY3Rpb25zRGF0YShsaXN0Q29sdW1uczogT1JlcG9ydEZ1bmN0aW9uW10pIHtcbiAgICByZXR1cm4gbGlzdENvbHVtbnMuZmlsdGVyKGNvbHVtbiA9PlxuICAgICAgdGhpcy5jb2x1bW5zRGF0YS5cbiAgICAgICAgZmluZEluZGV4KGNvbHVtbkRhdGEgPT5cbiAgICAgICAgICBjb2x1bW5EYXRhLmNvbHVtblN0eWxlICYmIGNvbHVtbkRhdGEuY29sdW1uU3R5bGUucmVuZGVyZXIgJiYgY29sdW1uRGF0YS5jb2x1bW5TdHlsZS5yZW5kZXJlci50eXBlID09PSAnc2VydmljZScgJiYgY29sdW1uRGF0YS5pZCA9PT0gY29sdW1uLmNvbHVtbk5hbWVcbiAgICAgICAgKSA9PT0gLTFcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBwcmVmZXJlbmNlIGRhdGEgaXMgY29uc2lzdGVudCB3aXRoIHRoZSB0YWJsZSBkYXRhXG4gICAqL1xuICBwcml2YXRlIGNoZWNrUHJlZmVyZW5jZURhdGEoKSB7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zID0gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zLmZpbHRlcihjb2x1bW4gPT4gdGhpcy5pbml0aWFsQ29sdW1uc0RhdGEuZmluZEluZGV4KGNvbHVtbkRhdGEgPT4gY29sdW1uRGF0YS5pZCA9PT0gY29sdW1uLmlkKSA+IC0xKTtcbiAgICB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmdyb3VwcyA9IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZ3JvdXBzLmZpbHRlcihjb2x1bW4gPT4gdGhpcy5pbml0aWFsQ29sdW1uc1RvR3JvdXBEYXRhLmZpbmRJbmRleChjb2x1bW5EYXRhID0+IGNvbHVtbkRhdGEgPT09IGNvbHVtbikgPiAtMSk7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5mdW5jdGlvbnMgPSB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmZ1bmN0aW9ucy5maWx0ZXIoY29sdW1uID0+IHRoaXMuaW5pdGlhbEZ1bmN0aW9uc0RhdGEuZmluZEluZGV4KGNvbHVtbkRhdGEgPT4gY29sdW1uRGF0YS5jb2x1bW5OYW1lID09PSBjb2x1bW4uY29sdW1uTmFtZSkgPiAtMSk7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5vcmRlckJ5ID0gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5vcmRlckJ5LmZpbHRlcihjb2x1bW4gPT4gdGhpcy5jb2x1bW5zT3JkZXJCeS5maW5kSW5kZXgoY29sdW1uRGF0YSA9PiBjb2x1bW5EYXRhLmNvbHVtbklkID09PSBjb2x1bW4uY29sdW1uSWQpID4gLTEpO1xuICB9XG5cbiAgYXBwbHlDb25maWd1cmF0aW9uKGNvbmZpZ3VyYXRpb246IGFueSkge1xuICAgIHRoaXMuY2xlYXJDdXJyZW50UHJlZmVyZW5jZXMoKTtcbiAgICB0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgICB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlID0gSlNPTi5wYXJzZSh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLlBSRUZFUkVOQ0VTKTtcbiAgICB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmNvbHVtbnMuZm9yRWFjaCgoY29sdW1uOiBPUmVwb3J0Q29sdW1uKSA9PiB0aGlzLnVwZGF0ZUNvbHVtbnNPcmRlckJ5RGF0YShjb2x1bW4uaWQpKTtcblxuICAgIHRoaXMuY2hlY2tQcmVmZXJlbmNlRGF0YSgpO1xuICAgIC8vIFNldCB0aGUgZnVuY3Rpb25zRGF0YSB3aXRoIHRoZSBkYXRhIHRoYXQgaXMgbG9hZGVkIGZyb20gdGhlIGNvbmZpZ3VyYXRpb24gYmVjYXVzZSBpdCBjaGFuZ2VzXG4gICAgdGhpcy5mdW5jdGlvbnNEYXRhID0gdGhpcy5mdW5jdGlvbnNEYXRhLm1hcCgoZnVuY3Rpb25EYXRhOiBPUmVwb3J0RnVuY3Rpb24pID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5mdW5jdGlvbnMuZmluZEluZGV4KHggPT4geC5jb2x1bW5OYW1lID09PSBmdW5jdGlvbkRhdGEuY29sdW1uTmFtZSk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBmdW5jdGlvbkRhdGEudHlwZSA9IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZnVuY3Rpb25zW2luZGV4XS50eXBlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uRGF0YVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb2x1bW5zRGF0YS5zb3J0KChhOiBPUmVwb3J0Q29sdW1uLCBiOiBPUmVwb3J0Q29sdW1uKSA9PiB7XG4gICAgICBsZXQgaW5kZXhBID0gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zLmZpbmRJbmRleCh4ID0+IHguaWQgPT09IGEuaWQpO1xuICAgICAgbGV0IGluZGV4QiA9IHRoaXMuY3VycmVudFByZWZlcmVuY2UuY29sdW1ucy5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBiLmlkKTtcbiAgICAgIHJldHVybiB0aGlzLmdldFNvcnRJbmRleChpbmRleEEsIGluZGV4Qik7XG5cbiAgICB9KTtcbiAgICB0aGlzLmNvbHVtbnNPcmRlckJ5LnNvcnQoKGE6IE9SZXBvcnRPcmRlckJ5LCBiOiBPUmVwb3J0T3JkZXJCeSkgPT4ge1xuICAgICAgbGV0IGluZGV4QSA9IHRoaXMuY3VycmVudFByZWZlcmVuY2Uub3JkZXJCeS5maW5kSW5kZXgoeCA9PiB4LmNvbHVtbklkID09PSBhLmNvbHVtbklkKTtcbiAgICAgIGxldCBpbmRleEIgPSB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLm9yZGVyQnkuZmluZEluZGV4KHggPT4geC5jb2x1bW5JZCA9PT0gYi5jb2x1bW5JZCk7XG4gICAgICByZXR1cm4gdGhpcy5nZXRTb3J0SW5kZXgoaW5kZXhBLCBpbmRleEIpO1xuXG4gICAgfSk7XG4gICAgdGhpcy5jb2x1bW5zVG9Hcm91cERhdGEuc29ydCgoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHtcbiAgICAgIGxldCBpbmRleEEgPSB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmdyb3Vwcy5maW5kSW5kZXgoeCA9PiB4ID09PSBhKTtcbiAgICAgIGxldCBpbmRleEIgPSB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmdyb3Vwcy5maW5kSW5kZXgoeCA9PiB4ID09PSBiKTtcbiAgICAgIHJldHVybiB0aGlzLmdldFNvcnRJbmRleChpbmRleEEsIGluZGV4Qik7XG4gICAgfSk7XG5cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U29ydEluZGV4KGluZGV4QTogbnVtYmVyLCBpbmRleEI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKGluZGV4QSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAoaW5kZXhCID09PSAtMSkge1xuICAgICAgcmV0dXJuIGluZGV4QjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGluZGV4QSAtIGluZGV4QjtcbiAgICB9XG5cbiAgfVxuXG4gIHNob3dDb2x1bW5TdHlsZURpYWxvZyhldmVudDogRXZlbnQsIGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBjb25zdCBjb2x1bW5EYXRhOiBPUmVwb3J0Q29sdW1uID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zLmZpbmQoKHg6IE9SZXBvcnRDb2x1bW4pID0+IHguaWQgPT09IGlkKSk7XG4gICAgaWYgKFV0aWwuaXNEZWZpbmVkKGNvbHVtbkRhdGEpKSB7XG4gICAgICB0aGlzLmRpYWxvZ1xuICAgICAgICAub3BlbihTdHlsZURpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAgIGRhdGE6IGNvbHVtbkRhdGEsXG4gICAgICAgICAgcGFuZWxDbGFzczogWydvLWRpYWxvZy1jbGFzcycsICdvLXRhYmxlLWRpYWxvZyddXG4gICAgICAgIH0pXG4gICAgICAgIC5hZnRlckNsb3NlZCgpXG4gICAgICAgIC5zdWJzY3JpYmUoKGRhdGE6IE9SZXBvcnRDb2x1bW4pID0+IHtcbiAgICAgICAgICBpZiAoVXRpbC5pc0RlZmluZWQoZGF0YSkgJiYgZGF0YSkge1xuICAgICAgICAgICAgY29uc3QgY29sdW1uID0gVXRpbHMuY2xvbmVPYmplY3QoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtblN0eWxlQ29uZmlndXJhdGlvbkRhdGEoY29sdW1uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUNvbHVtblN0eWxlQ29uZmlndXJhdGlvbkRhdGEoZGF0YTogT1JlcG9ydENvbHVtbikge1xuXG5cbiAgICBsZXQgY29sdW1ucyA9IFV0aWxzLmNsb25lT2JqZWN0KHRoaXMuY3VycmVudFByZWZlcmVuY2UuY29sdW1ucyk7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zID0gW107XG4gICAgY29uc3QgaW5kZXhDb2x1bW5EYXRhID0gdGhpcy5jb2x1bW5zRGF0YS5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBkYXRhLmlkKTtcbiAgICBpZiAoaW5kZXhDb2x1bW5EYXRhID4gLTEpIHtcbiAgICAgIHRoaXMuY29sdW1uc0RhdGFbaW5kZXhDb2x1bW5EYXRhXSA9IGRhdGE7XG4gICAgfVxuICAgIGNvbnN0IGluZGV4Q29sdW1uU3R5bGVEYXRhID0gY29sdW1ucy5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBkYXRhLmlkKTtcbiAgICBpZiAoaW5kZXhDb2x1bW5TdHlsZURhdGEgPiAtMSkge1xuICAgICAgY29sdW1uc1tpbmRleENvbHVtblN0eWxlRGF0YV0gPSBkYXRhO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2UuY29sdW1ucyA9IGNvbHVtbnM7XG5cbiAgfVxuXG5cbiAgc2VsZWN0RnVuY3Rpb24oZXZlbnQsIHJlcG9ydEZ1bmN0aW9uOiBPUmVwb3J0RnVuY3Rpb24pOiB2b2lkIHtcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBpZiAocmVwb3J0RnVuY3Rpb24uY29sdW1uTmFtZSAhPSAnVE9UQUwnKSB7XG4gICAgICB0aGlzLmRpYWxvZ1xuICAgICAgICAub3BlbihTZWxlY3RGdW5jdGlvbkRpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAgIGRhdGE6IHJlcG9ydEZ1bmN0aW9uLFxuICAgICAgICAgIHBhbmVsQ2xhc3M6IFsnby1kaWFsb2ctY2xhc3MnLCAnby10YWJsZS1kaWFsb2cnXVxuICAgICAgICB9KVxuICAgICAgICAuYWZ0ZXJDbG9zZWQoKVxuICAgICAgICAuc3Vic2NyaWJlKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAvL1VwZGF0ZWQgY3VycmVudCBmdW5jdGlvbnMgc2VsZWN0ZWQgYW5kIGZ1bmN0aW9uc0RhdGFcbiAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVkRnVuY3Rpb25EYXRhKGRhdGEpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVkU2VsZWN0RnVuY3Rpb24oZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZWRGdW5jdGlvbkRhdGEoZGF0YTogT1JlcG9ydEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZ1bmN0aW9uc0RhdGEuZmluZEluZGV4KHggPT4geC5jb2x1bW5OYW1lID09PSBkYXRhLmNvbHVtbk5hbWUpO1xuICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgIHRoaXMuZnVuY3Rpb25zRGF0YS5wdXNoKGRhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZ1bmN0aW9uc0RhdGFbaW5kZXhdID0gZGF0YTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZWRTZWxlY3RGdW5jdGlvbihzZWxlY3RlZEZ1bmN0aW9uOiBPUmVwb3J0RnVuY3Rpb24pIHtcbiAgICB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmZ1bmN0aW9ucy5mb3JFYWNoKChkYXRhOiBhbnksIGk6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKGRhdGEuY29sdW1uTmFtZSA9PT0gc2VsZWN0ZWRGdW5jdGlvbi5jb2x1bW5OYW1lKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2UuZnVuY3Rpb25zW2ldID0gZGF0YTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgb3BlblNhdmVBc1ByZWZlcmVuY2VzKCk6IHZvaWQge1xuICAgIHRoaXMuZGlhbG9nXG4gICAgICAub3BlbihTYXZlUHJlZmVyZW5jZXNEaWFsb2dDb21wb25lbnQsIHtcbiAgICAgICAgcGFuZWxDbGFzczogWydvLWRpYWxvZy1jbGFzcycsICdvLXRhYmxlLWRpYWxvZyddXG4gICAgICB9KVxuICAgICAgLmFmdGVyQ2xvc2VkKClcbiAgICAgIC5zdWJzY3JpYmUoKGRhdGE6IHsgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nIH0pID0+IHtcbiAgICAgICAgaWYgKFV0aWwuaXNEZWZpbmVkKGRhdGEpICYmIGRhdGEpIHtcbiAgICAgICAgICB0aGlzLnNhdmVQcmVmZXJlbmNlcyhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIGRyb3BDb2x1bW5zKGV2ZW50OiBDZGtEcmFnRHJvcDxzdHJpbmdbXT4pIHtcbiAgICBtb3ZlSXRlbUluQXJyYXkodGhpcy5jb2x1bW5zRGF0YSwgZXZlbnQucHJldmlvdXNJbmRleCwgZXZlbnQuY3VycmVudEluZGV4KTtcbiAgICB0aGlzLnVwZGF0ZUNvbHVtbnNTb3J0KCk7XG4gIH1cblxuICBkcm9wR3JvdXBzKGV2ZW50OiBDZGtEcmFnRHJvcDxhbnlbXT4pIHtcbiAgICBtb3ZlSXRlbUluQXJyYXkodGhpcy5jb2x1bW5zVG9Hcm91cERhdGEsIGV2ZW50LnByZXZpb3VzSW5kZXgsIGV2ZW50LmN1cnJlbnRJbmRleClcbiAgICB0aGlzLnVwZGF0ZUNvbHVtblRvR3JvdXBTb3J0KCk7XG4gIH1cblxuICBkcm9wQ29sdW1uc09yZGVyQnkoZXZlbnQ6IENka0RyYWdEcm9wPHN0cmluZ1tdPikge1xuICAgIG1vdmVJdGVtSW5BcnJheSh0aGlzLmNvbHVtbnNPcmRlckJ5LCBldmVudC5wcmV2aW91c0luZGV4LCBldmVudC5jdXJyZW50SW5kZXgpO1xuICAgIHRoaXMudXBkYXRlQ29sdW1uR3JvdXBCeVNvcnQoKTtcbiAgfVxuXG4gIHVwZGF0ZUNvbHVtbnNTb3J0KCkge1xuICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2UuY29sdW1ucy5zb3J0KChhOiBPUmVwb3J0Q29sdW1uLCBiOiBPUmVwb3J0Q29sdW1uKSA9PiB7XG4gICAgICBsZXQgaW5kZXhBID0gdGhpcy5jb2x1bW5zRGF0YS5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBhLmlkKTtcbiAgICAgIGxldCBpbmRleEIgPSB0aGlzLmNvbHVtbnNEYXRhLmZpbmRJbmRleCh4ID0+IHguaWQgPT09IGIuaWQpO1xuICAgICAgcmV0dXJuIGluZGV4QSAtIGluZGV4QjtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUNvbHVtbkdyb3VwQnlTb3J0KCkge1xuICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2Uub3JkZXJCeS5zb3J0KChhOiBPUmVwb3J0T3JkZXJCeSwgYjogT1JlcG9ydE9yZGVyQnkpID0+IHtcbiAgICAgIGxldCBpbmRleEEgPSB0aGlzLmNvbHVtbnNPcmRlckJ5LmZpbmRJbmRleCh4ID0+IHguY29sdW1uSWQgPT09IGEuY29sdW1uSWQpO1xuICAgICAgbGV0IGluZGV4QiA9IHRoaXMuY29sdW1uc09yZGVyQnkuZmluZEluZGV4KHggPT4geC5jb2x1bW5JZCA9PT0gYi5jb2x1bW5JZCk7XG4gICAgICByZXR1cm4gaW5kZXhBIC0gaW5kZXhCO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQ29sdW1uVG9Hcm91cFNvcnQoKSB7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5ncm91cHMuc29ydCgoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHtcbiAgICAgIGxldCBpbmRleEEgPSB0aGlzLmNvbHVtbnNUb0dyb3VwRGF0YS5maW5kSW5kZXgoeCA9PiB4ID09PSBhKTtcbiAgICAgIGxldCBpbmRleEIgPSB0aGlzLmNvbHVtbnNUb0dyb3VwRGF0YS5maW5kSW5kZXgoeCA9PiB4ID09PSBiKTtcbiAgICAgIHJldHVybiBpbmRleEEgLSBpbmRleEI7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgb25BcHBseUNvbmZpZ3VyYXRpb25DbGlja2VkKCk6IHZvaWQge1xuICAgIHRoaXMuZGlhbG9nLm9wZW4oQXBwbHlDb25maWd1cmF0aW9uRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICB3aWR0aDogJ2NhbGMoKDc1ZW0gLSAxMDAlKSAqIDEwMDApJyxcbiAgICAgIG1heFdpZHRoOiAnNjV2dycsXG4gICAgICBtaW5XaWR0aDogJzMwdncnLFxuICAgICAgZGlzYWJsZUNsb3NlOiB0cnVlLFxuICAgICAgcGFuZWxDbGFzczogWydvLWRpYWxvZy1jbGFzcycsICdvLXRhYmxlLWRpYWxvZyddLFxuICAgICAgZGF0YTogeyBlbnRpdHk6IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZW50aXR5LCBzZXJ2aWNlOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnNlcnZpY2UgfSxcbiAgICB9KS5hZnRlckNsb3NlZCgpXG4gICAgICAuc3Vic2NyaWJlKChkYXRhOiBPUmVwb3J0Q29uZmlndXJhdGlvbikgPT4ge1xuICAgICAgICBpZiAoVXRpbC5pc0RlZmluZWQoZGF0YSkgJiYgZGF0YSkge1xuICAgICAgICAgIHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKGRhdGEpO1xuICAgICAgICAgIHRoaXMuYXBwbGllZENvbmZpZ3VyYXRpb24gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9LCBfZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLmFwcGxpZWRDb25maWd1cmF0aW9uID0gZmFsc2U7XG4gICAgICB9KTtcbiAgfVxuXG4gIG9wZW5TYXZlUHJlZmVyZW5jZXMoKTogdm9pZCB7XG4gICAgaWYgKFV0aWwuaXNEZWZpbmVkKHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24uSUQpKSB7XG4gICAgICB0aGlzLnNhdmVQcmVmZXJlbmNlcyh7IG5hbWU6IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24uTkFNRSwgZGVzY3JpcHRpb246IHRoaXMuY3VycmVudENvbmZpZ3VyYXRpb24uREVTQ1JJUFRJT04gfSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGlhbG9nXG4gICAgICAgIC5vcGVuKFNhdmVQcmVmZXJlbmNlc0RpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgICAgIHBhbmVsQ2xhc3M6IFsnby1kaWFsb2ctY2xhc3MnLCAnby10YWJsZS1kaWFsb2cnXVxuICAgICAgICB9KVxuICAgICAgICAuYWZ0ZXJDbG9zZWQoKVxuICAgICAgICAuc3Vic2NyaWJlKChkYXRhOiB7IG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZyB9KSA9PiB7XG4gICAgICAgICAgaWYgKFV0aWwuaXNEZWZpbmVkKGRhdGEpICYmIGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2F2ZVByZWZlcmVuY2VzKGRhdGEsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuICBzYXZlUHJlZmVyZW5jZXMoZGF0YTogYW55LCB1cGRhdGU/OiBib29sZWFuKSB7XG4gICAgbGV0IHByZWZlcmVuY2UgPSB7XG4gICAgICBcIm5hbWVcIjogZGF0YS5uYW1lLCBcImRlc2NyaXB0aW9uXCI6IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBcImVudGl0eVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmVudGl0eSwgXCJzZXJ2aWNlXCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2Uuc2VydmljZSwgXCJ0eXBlXCI6IFwiUkVQT1JUXCIsIFwicGFyYW1zXCI6IHtcbiAgICAgICAgXCJ0aXRsZVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnRpdGxlLCBcImdyb3Vwc1wiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmdyb3VwcyxcbiAgICAgICAgXCJ2ZXJ0aWNhbFwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnZlcnRpY2FsLCBcImZ1bmN0aW9uc1wiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmZ1bmN0aW9ucywgXCJzdHlsZVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLnN0eWxlLFxuICAgICAgICBcInN1YnRpdGxlXCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2Uuc3VidGl0bGUsIFwiY29sdW1uc1wiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmNvbHVtbnMsIFwib3JkZXJCeVwiOiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLm9yZGVyQnksIFwiZW50aXR5XCI6IHRoaXMuY3VycmVudFByZWZlcmVuY2UuZW50aXR5LCBcInNlcnZpY2VcIjogdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5zZXJ2aWNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgdGhpcy5yZXBvcnRTZXJ2aWNlLnNhdmVQcmVmZXJlbmNlcyh0aGlzLmN1cnJlbnRDb25maWd1cmF0aW9uLklELCBwcmVmZXJlbmNlKS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgICAgdGhpcy5zaG93Q29uZmlybU9wZXJhdGluSW5TbmFja0JhcihyZXMpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVwb3J0U2VydmljZS5zYXZlQXNQcmVmZXJlbmNlcyhwcmVmZXJlbmNlKS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcyAmJiByZXMuY29kZSA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd0NvbmZpcm1PcGVyYXRpbkluU25hY2tCYXIocmVzKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaG93Q29uZmlybU9wZXJhdGluSW5TbmFja0JhcihyZXM6IGFueSkge1xuICAgIGlmIChyZXMgJiYgcmVzLmNvZGUgPT09IDApIHtcbiAgICAgIHRoaXMuc25hY2tCYXJTZXJ2aWNlLm9wZW4oJ01FU1NBR0VTLlNBVkVEJywgeyBpY29uOiAnY2hlY2tfY2lyY2xlJyB9KTtcbiAgICB9XG4gIH1cblxuICBzZXRGdWxsc2NyZWVuRGlhbG9nKCk6IHZvaWQge1xuICAgIFV0aWxzLnNldEZ1bGxzY3JlZW5EaWFsb2codGhpcy5mdWxsc2NyZWVuLCB0aGlzLmRpYWxvZ1JlZik7XG4gICAgdGhpcy5mdWxsc2NyZWVuID0gIXRoaXMuZnVsbHNjcmVlbjtcbiAgfVxuXG4gIG9uU2VsZWN0aW9uQ2hhbmdlQ29sdW1ucyhldmVudDogTWF0U2VsZWN0aW9uTGlzdENoYW5nZSkge1xuICAgIGNvbnN0IHNlbGVjdGVkQ29sdW1uOiBPUmVwb3J0Q29sdW1uID0gZXZlbnQub3B0aW9uLnZhbHVlO1xuICAgIGNvbnN0IHNlbGVjdENvbHVtbklkID0gc2VsZWN0ZWRDb2x1bW4uaWQ7XG4gICAgdGhpcy51cGRhdGVDb2x1bW5zT3JkZXJCeURhdGEoc2VsZWN0Q29sdW1uSWQsIGV2ZW50KTtcblxuICB9XG5cbiAgb25TZWxlY3Rpb25DaGFuZ2VHcm91cHMoZXZlbnQ6IE1hdFNlbGVjdGlvbkxpc3RDaGFuZ2UpIHtcbiAgICBpZiAoIWV2ZW50Lm9wdGlvbi5zZWxlY3RlZCkgcmV0dXJuO1xuICAgIGxldCBncm91cFNlbGVjdGVkOiBzdHJpbmcgPSBldmVudC5vcHRpb24udmFsdWU7XG4gICAgdGhpcy51cGRhdGVDb2x1bW5zT3JkZXJCeURhdGEoZ3JvdXBTZWxlY3RlZCwgZXZlbnQpO1xuICAgIGlmIChldmVudC5vcHRpb24uc2VsZWN0ZWQgJiZcbiAgICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2UuY29sdW1ucy5maW5kSW5kZXgoeCA9PiB4LmlkID09PSBncm91cFNlbGVjdGVkKSA9PT0gLTEpIHtcbiAgICAgIGNvbnN0IGNvbHVtblN0eWxlU2VsZWN0ZWQ6IE9SZXBvcnRDb2x1bW5bXSA9IHRoaXMuY29sdW1uc0RhdGEuZmlsdGVyKCh4OiBPUmVwb3J0Q29sdW1uKSA9PiB4LmlkID09PSBncm91cFNlbGVjdGVkKVxuICAgICAgaWYgKGNvbHVtblN0eWxlU2VsZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmFkZENvbHVtbkRhdGEoY29sdW1uU3R5bGVTZWxlY3RlZFswXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICB1cGRhdGVDb2x1bW5zT3JkZXJCeURhdGEoY29sdW1uSWQ6IHN0cmluZywgZXZlbnQ/OiBNYXRTZWxlY3Rpb25MaXN0Q2hhbmdlKSB7XG5cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICBjb25zdCBleGlzdENvbHVtbiA9IHRoaXMuY29sdW1uc0FycmF5LmZpbmRJbmRleChjb2wgPT4gY29sID09PSBjb2x1bW5JZCk7XG4gICAgICBpZiAoZXhpc3RDb2x1bW4gPT09IC0xKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignVGhlIGxvYWRlZCBjb25maWd1cmF0aW9uIGhhcyB0aGUgY29sdW1uICcgKyBjb2x1bW5JZCArICcgY29uZmlndXJlZCBidXQgdGhpcyBjb2x1bW4gZG9lcyBub3QgZXhpc3QgYXMgYSB0YWJsZSBjb2x1bW4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvbHVtbkdyb3VwQnlTZWxlY3RlZDogT1JlcG9ydE9yZGVyQnkgPSB7IGNvbHVtbklkOiBjb2x1bW5JZCwgYXNjZW5kZW50OiB0cnVlIH1cbiAgICBsZXQgaW5kZXggPSB0aGlzLmNvbHVtbnNPcmRlckJ5LmZpbmRJbmRleCh4ID0+IHguY29sdW1uSWQgPT09IGNvbHVtbklkKTtcbiAgICBpZiAoKCFldmVudCkgfHwgKGV2ZW50ICYmIGV2ZW50Lm9wdGlvbi5zZWxlY3RlZCkpIHtcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zT3JkZXJCeS5wdXNoKGNvbHVtbkdyb3VwQnlTZWxlY3RlZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMuY29sdW1uc09yZGVyQnkuc3BsaWNlKGluZGV4KTtcbiAgICB9XG5cbiAgfVxuXG5cbiAgYWRkQ29sdW1uRGF0YShjb2x1bW5TZWxlY3RlZCkge1xuICAgIC8vT2JqZWN0IERlZXAgQ2xvbmluZ1xuICAgIGxldCBjdXJyZW50UHJlZmVyZW5jZSA9IFV0aWxzLmNsb25lT2JqZWN0KHRoaXMuY3VycmVudFByZWZlcmVuY2UpO1xuICAgIGN1cnJlbnRQcmVmZXJlbmNlLmNvbHVtbnMucHVzaChjb2x1bW5TZWxlY3RlZCk7XG4gICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZSA9IGN1cnJlbnRQcmVmZXJlbmNlO1xuICAgIHRoaXMudXBkYXRlQ29sdW1uc1NvcnQoKTtcbiAgfVxuXG4gIG9uU2VsZWN0aW9uQ2hhbmdlRnVuY3Rpb25zKGV2ZW50OiBNYXRTZWxlY3Rpb25MaXN0Q2hhbmdlKSB7XG4gICAgaWYgKCFldmVudC5vcHRpb24uc2VsZWN0ZWQgfHwgZXZlbnQub3B0aW9uLnZhbHVlLmNvbHVtbk5hbWUgPT09ICdUT1RBTCcpIHJldHVybjtcbiAgICBjb25zdCBmdW5jdGlvblNlbGVjdCA9IGV2ZW50Lm9wdGlvbi52YWx1ZTtcbiAgICBjb25zdCBjb2x1bW5TZWxlY3RlZFRvR3JvdXAgPSBmdW5jdGlvblNlbGVjdC5jb2x1bW5OYW1lO1xuXG4gICAgaWYgKGV2ZW50Lm9wdGlvbi5zZWxlY3RlZCAmJlxuICAgICAgdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zLmZpbmRJbmRleCh4ID0+IHguaWQgPT09IGNvbHVtblNlbGVjdGVkVG9Hcm91cCkgPT09IC0xKSB7XG4gICAgICBjb25zdCBjb2x1bW4gPSB0aGlzLmNvbHVtbnNEYXRhLmZpbmQoeCA9PiB4LmlkID09PSBjb2x1bW5TZWxlY3RlZFRvR3JvdXApO1xuICAgICAgdGhpcy5hZGRDb2x1bW5EYXRhKGNvbHVtbik7XG4gICAgfVxuICB9XG5cblxuICBjaGFuZ2VPcmRlcihjb2x1bW46IE9SZXBvcnRPcmRlckJ5LCBldmVudCkge1xuICAgIGNvbnN0IGNvbHVtblNlbGVjdGVkVG9PcmRlciA9IHRoaXMuY29sdW1uc09yZGVyQnkuZmluZCh4ID0+IHguY29sdW1uSWQgPT09IGNvbHVtbi5jb2x1bW5JZCk7XG4gICAgaWYgKGNvbHVtblNlbGVjdGVkVG9PcmRlcikge1xuICAgICAgY29sdW1uU2VsZWN0ZWRUb09yZGVyLmFzY2VuZGVudCA9ICFjb2x1bW5TZWxlY3RlZFRvT3JkZXIuYXNjZW5kZW50O1xuICAgIH1cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxuXG4gIGlzQ2hlY2tlZENvbHVtbihjb2x1bW46IE9SZXBvcnRDb2x1bW4pIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5jb2x1bW5zLmxlbmd0aCA+IDAgPyB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmNvbHVtbnMuZmlsdGVyKHggPT4geC5pZCA9PT0gY29sdW1uLmlkKS5sZW5ndGggPiAwIDogZmFsc2U7XG4gIH1cblxuICBpc0NoZWNrZWRGdW5jdGlvbihjb2x1bW46IE9SZXBvcnRGdW5jdGlvbikge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRQcmVmZXJlbmNlLmZ1bmN0aW9ucy5sZW5ndGggPiAwID8gdGhpcy5jdXJyZW50UHJlZmVyZW5jZS5mdW5jdGlvbnMuZmlsdGVyKHggPT4gKHguY29sdW1uTmFtZSA9PT0gY29sdW1uLmNvbHVtbk5hbWUgJiYgeC50eXBlID09PSBjb2x1bW4udHlwZSkgJiYgeC50eXBlICE9PSAnVE9UQUwnKS5sZW5ndGggPiAwIDogZmFsc2U7XG4gIH1cblxuICBjb2x1bW5zT3JkZXJCeUNvbXBhcmVGdW5jdGlvbihjbzE6IE9SZXBvcnRPcmRlckJ5LCBjbzI6IE9SZXBvcnRPcmRlckJ5KSB7XG4gICAgcmV0dXJuIGNvMS5jb2x1bW5JZCA9PT0gY28yLmNvbHVtbklkO1xuICB9XG5cbiAgb25DaGVja2JveFN0eWxlQ2xpY2sodmFsdWUpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50UHJlZmVyZW5jZS5zdHlsZVt2YWx1ZV0pIHtcbiAgICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2Uuc3R5bGVbdmFsdWVdID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY3VycmVudFByZWZlcmVuY2Uuc3R5bGVbdmFsdWVdID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBjb2x1bW5zQ29tcGFyZUZ1bmN0aW9uKGNvMTogT1JlcG9ydENvbHVtbiwgY28yOiBPUmVwb3J0Q29sdW1uKSB7XG4gICAgcmV0dXJuIGNvMS5pZCA9PT0gY28yLmlkO1xuICB9XG5cbiAgZnVuY3Rpb25zQ29tcGFyZUZ1bmN0aW9uKGNvMTogT1JlcG9ydEZ1bmN0aW9uLCBjbzI6IE9SZXBvcnRGdW5jdGlvbikge1xuICAgIHJldHVybiBjbzEuY29sdW1uTmFtZSA9PT0gY28yLmNvbHVtbk5hbWU7XG4gIH1cblxuXG5cbiAgcHJvdGVjdGVkIGNyZWF0ZVJlbmRlcmVyKGNvbHVtbjogc3RyaW5nKTogYW55IHtcbiAgICBsZXQgb0NvbHVtbjogT0NvbHVtbiA9IHRoaXMudGFibGUub1RhYmxlT3B0aW9ucy5jb2x1bW5zLmZpbmQoeCA9PiB4LmF0dHIgPT09IGNvbHVtbik7XG4gICAgbGV0IG5ld1JlbmRlcmVyOiBhbnk7XG4gICAgaWYgKFV0aWwuaXNEZWZpbmVkKG9Db2x1bW4pICYmIFV0aWwuaXNEZWZpbmVkKG9Db2x1bW4udHlwZSkgJiYgb0NvbHVtbi50eXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgY29uc3QgdHlwZSA9IG9Db2x1bW4udHlwZTtcbiAgICAgIG5ld1JlbmRlcmVyID0ge307XG5cbiAgICAgIGxldCBjb2x1bW5SZW5kZXJlcjogYW55ID0gb0NvbHVtbi5yZW5kZXJlcjtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdjdXJyZW5jeSc6XG4gICAgICAgICAgbmV3UmVuZGVyZXIudHlwZSA9IHR5cGVcbiAgICAgICAgICBuZXdSZW5kZXJlci5jdXJyZW5jeVN5bWJvbCA9IGNvbHVtblJlbmRlcmVyLmN1cnJlbmN5U3ltYm9sO1xuICAgICAgICAgIG5ld1JlbmRlcmVyLmN1cnJlbmN5U3ltYm9sUG9zaXRpb24gPSBjb2x1bW5SZW5kZXJlci5jdXJyZW5jeVN5bWJvbFBvc2l0aW9uO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICBuZXdSZW5kZXJlci50eXBlID0gdHlwZVxuICAgICAgICAgIG5ld1JlbmRlcmVyLmZvcm1hdCA9IGNvbHVtblJlbmRlcmVyLmZvcm1hdDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgbmV3UmVuZGVyZXIudHlwZSA9IHR5cGVcbiAgICAgICAgICBuZXdSZW5kZXJlci5ncm91cGluZyA9IGNvbHVtblJlbmRlcmVyLmdyb3VwaW5nO1xuICAgICAgICAgIG5ld1JlbmRlcmVyLnRob3VzYW5kU2VwYXJhdG9yID0gY29sdW1uUmVuZGVyZXIudGhvdXNhbmRTZXBhcmF0b3I7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlYWwnOlxuICAgICAgICAgIG5ld1JlbmRlcmVyLnR5cGUgPSB0eXBlXG4gICAgICAgICAgbmV3UmVuZGVyZXIuZGVjaW1hbFNlcGFyYXRvciA9IGNvbHVtblJlbmRlcmVyLmRlY2ltYWxTZXBhcmF0b3I7XG4gICAgICAgICAgbmV3UmVuZGVyZXIuZ3JvdXBpbmcgPSBjb2x1bW5SZW5kZXJlci5ncm91cGluZztcbiAgICAgICAgICBuZXdSZW5kZXJlci50aG91c2FuZFNlcGFyYXRvciA9IGNvbHVtblJlbmRlcmVyLnRob3VzYW5kU2VwYXJhdG9yO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzZXJ2aWNlJzpcbiAgICAgICAgICBuZXdSZW5kZXJlci50eXBlID0gdHlwZVxuICAgICAgICAgIG5ld1JlbmRlcmVyLmVudGl0eSA9IGNvbHVtblJlbmRlcmVyLmVudGl0eTtcbiAgICAgICAgICBuZXdSZW5kZXJlci5zZXJ2aWNlID0gY29sdW1uUmVuZGVyZXIuc2VydmljZTtcbiAgICAgICAgICBuZXdSZW5kZXJlci5rZXlDb2x1bW4gPSBvQ29sdW1uLmF0dHI7XG4gICAgICAgICAgbmV3UmVuZGVyZXIuY29sdW1ucyA9IFV0aWwucGFyc2VBcnJheShjb2x1bW5SZW5kZXJlci5jb2x1bW5zKTtcbiAgICAgICAgICBuZXdSZW5kZXJlci52YWx1ZUNvbHVtbiA9IGNvbHVtblJlbmRlcmVyLnZhbHVlQ29sdW1uO1xuICAgICAgICAgIG5ld1JlbmRlcmVyLnBhcmVudEtleXMgPSBVdGlsLnBhcnNlQXJyYXkoY29sdW1uUmVuZGVyZXIucGFyZW50S2V5cyk7XG4gICAgICAgICAgY29uc3Qgc2VydmljZUNvbmZpZ3VyYXRpb24gPSB0aGlzLmdldERlZmF1bHRTZXJ2aWNlQ29uZmlndXJhdGlvbihjb2x1bW5SZW5kZXJlci5zZXJ2aWNlKTtcbiAgICAgICAgICBpZiAoVXRpbC5pc09iamVjdChzZXJ2aWNlQ29uZmlndXJhdGlvbikgJiYgT2JqZWN0Lmhhc093blByb3BlcnR5KHNlcnZpY2VDb25maWd1cmF0aW9uLnBhdGgpKSB7XG4gICAgICAgICAgICBuZXdSZW5kZXJlci5wYXRoID0gc2VydmljZUNvbmZpZ3VyYXRpb24ucGF0aDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdSZW5kZXJlcjtcbiAgfVxufVxuXG4iXX0=